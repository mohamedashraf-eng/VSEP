<!DOCTYPE html>
<!-- saved from url=(0523)https://disqus.com/embed/comments/?base=default&f=stm32f4discoverycom&t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&s_o=default#version=9a2e2eeaa47582a66c70de7213b5209c -->
<html lang="en" dir="ltr" class="js no-touch localstorage sessionstorage contenteditable use-opacity-transitions embed-refresh embed-refresh-v2" style="--publisher-color: rgb(59,141,189); --publisher-color-safe: rgb(59,141,189);"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Disqus Comments</title>

    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <style>
        .alert--warning {
            border-radius: 3px;
            padding: 10px 15px;
            margin-bottom: 10px;
            background-color: #FFE070;
            color: #A47703;
        }

        .alert--warning a,
        .alert--warning a:hover,
        .alert--warning strong {
            color: #A47703;
            font-weight: bold;
        }

        .alert--error p,
        .alert--warning p {
            margin-top: 5px;
            margin-bottom: 5px;
        }
        
        </style>
    
    <style>
        
        html {
            overflow: hidden;
        }
        

        #error {
            display: none;
        }

        .clearfix:after {
            content: "";
            display: block;
            height: 0;
            clear: both;
            visibility: hidden;
        }

        
    </style>

<script src="./sdk.js.download" async="" crossorigin="anonymous"></script><script src="./cb=gapi(2).loaded_0" async=""></script><script crossorigin="anonymous" id="bootstrap-script" data-app="lounge" src="./lounge.load.9a2e2eeaa47582a66c70de7213b5209c.js.download"></script><meta http-equiv="Content-Security-Policy" content="script-src https:;"><style type="text/css">:root [data-role="ad-content"], :root [href^="//x4pollyxxpush.com/"], :root zeus-ad, :root topadblock, :root span[id^="ezoic-pub-ad-placeholder-"], :root guj-ad, :root gpt-ad, :root div[id^="zergnet-widget"], :root div[id^="vuukle-ad-"], :root div[id^="sticky_ad_"], :root div[id^="rc-widget-"], :root div[id^="gpt_ad_"], :root div[id^="ezoic-pub-ad-"], :root div[id^="div-gpt-"], :root div[id^="dfp-ad-"], :root div[id^="adspot-"], :root div[id^="ads300_250-widget-"], :root div[id^="ads300_100-widget-"], :root div[id^="ads250_250-widget-"], :root div[id^="adrotate_widgets-"], :root div[id^="_vdo_ads_player_ai_"], :root div[id*="ScriptRoot"], :root div[id*="MarketGid"], :root div[data-native_ad], :root div[data-mini-ad-unit], :root div[data-insertion], :root div[data-id-advertdfpconf], :root div[data-google-query-id], :root hl-adsense, :root div[data-contentexchange-widget], :root div[data-content="Advertisement"], :root div[data-alias="300x250 Ad 2"], :root div[data-alias="300x250 Ad 1"], :root div[data-adzone], :root div[data-adunit-path], :root div[data-ad-wrapper], :root div[data-ad-placeholder], :root div[class^="native-ad-"], :root div[data-dfp-id], :root div[class^="kiwi-ad-wrapper"], :root div[class^="Adstyled__AdWrapper-"], :root div[aria-label="Ads"], :root display-ads, :root display-ad-component, :root atf-ad-slot, :root aside[id^="adrotate_widgets-"], :root article.ad, :root ark-top-ad, :root app-advertisement, :root app-ad, :root amp-fx-flying-carpet, :root amp-embed[type="taboola"], :root amp-connatix-player, :root amp-ad-custom, :root amp-ad, :root a[style="width:100%;height:100%;z-index:10000000000000000;position:absolute;top:0;left:0;"], :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"] + .ob_source, :root a[href^="https://yogacomplyfuel.com/"], :root a[href^="https://www.sugarinstant.com/?partner_id="], :root a[href^="https://www.privateinternetaccess.com/"] > img, :root a[href^="https://www.onlineusershielder.com/"], :root a[href^="https://www.nutaku.net/signup/landing/"], :root a[href^="https://www.nudeidols.com/cams/"], :root a[href^="https://www.mypornstarcams.com/landing/click/"], :root a[href^="https://www.kingsoffetish.com/tour?partner_id="], :root a[href^="https://www.infowarsstore.com/"] > img, :root a[href^="https://www.highcpmrevenuenetwork.com/"], :root a[href^="https://www.googleadservices.com/pagead/aclk?"], :root a[href^="https://www.goldenfrog.com/vyprvpn?offer_id="][href*="&aff_id="], :root a[href^="https://www.get-express-vpn.com/offer/"], :root a[href^="https://www.financeads.net/tc.php?"], :root a[href^="https://www.brazzersnetwork.com/landing/"], :root div[class^="Display_displayAd"], :root a[href^="https://www.sheetmusicplus.com/?aff_id="], :root a[href^="https://www.bang.com/?aff="], :root a[href^="https://www.adxsrve.com/"], :root a[href^="https://wirewar.website/"], :root a[href^="https://visit-website.com/"], :root a[href^="https://twinrdsyn.com/"], :root a[href^="https://twinrdsrv.com/"], :root a[href^="https://tsartech.g2afse.com/"], :root a[href^="https://trk.sportsflix4k.club/"], :root a[href^="https://trk.nfl-online-streams.club/"], :root a[href^="https://traffdaq.com/"], :root a[href^="https://tracking.avapartner.com/"], :root a[href^="https://track.wg-aff.com"], :root a[href^="https://track.ultravpn.com/"], :root a[href^="https://track.totalav.com/"], :root a[href^="https://track.afcpatrk.com/"], :root a[href^="https://track.adform.net/"], :root a[href^="https://torguard.net/aff.php"] > img, :root a[href^="https://thefacux.com/"], :root div[data-adname], :root a[href^="https://thechleads.pro/"], :root a[href^="https://tc.tradetracker.net/"] > img, :root a[href^="https://taghaugh.com/"], :root a[href^="https://t.hrtye.com/"], :root a[href^="https://www.highperformancecpmgate.com/"], :root a[href^="https://t.grtyi.com/"], :root a[href^="https://t.adating.link/"], :root a[href^="https://go.trackitalltheway.com/"], :root [href^="https://track.fiverr.com/visit/"] > img, :root a[href^="https://syndication.exoclick.com/"], :root a[href^="https://syndication.dynsrvtbg.com/"], :root a[href^="https://streamate.com/landing/click/"], :root a[href^="https://ad.doubleclick.net/"], :root a[href^="https://static.fleshlight.com/images/banners/"], :root a[href^="https://slkmis.com/"], :root a[href^="https://sTaRtGAMing.net/tienda/"], :root citrus-ad-wrapper, :root a[onmousedown^="this.href='https://paid.outbrain.com/network/redir?"][target="_blank"], :root a[href^="https://sTaRTgamInG.net/tienda/"], :root [data-adblockkey], :root a[href^="https://sTARtgamIng.net/tienda/"], :root bottomadblock, :root a[href^="https://s.zlinkd.com/"], :root a[href^="https://aweptjmp.com/"], :root a[href^="https://s.zlinkc.com/"], :root a[href^="https://www.mrskin.com/account/"], :root a[href^="https://s.optzsrv.com/"], :root a[data-obtrack^="http://paid.outbrain.com/network/redir?"], :root a[href^="https://reinstandpointdumbest.com/"], :root a[href^="https://go.strpjmp.com/"], :root a[href^="https://refpa4903566.top/"], :root a[href^="https://pubads.g.doubleclick.net/"], :root a[href^="https://prf.hn/click/"][href*="/camref:"] > img, :root a[href^="https://serve.awmdelivery.com/"], :root a[href^="https://prf.hn/click/"][href*="/adref:"] > img, :root a[href^="https://pb-track.com/"], :root a[href^="https://paid.outbrain.com/network/redir?"], :root ps-connatix-module, :root div[id^="ad_position_"], :root a[href^="https://ovb.im/"], :root div[id^="ad-div-"], :root a[href^="https://newbinotracs.com/"], :root a[href^="http://eighteenderived.com/"], :root a[href^="https://natour.naughtyamerica.com/track/"], :root [href^="https://stvkr.com/"], :root a[href^="https://mediaserver.entainpartners.com/renderBanner.do?"], :root a[href^="https://loboclick.com"], :root .nya-slot[style], :root a[href^="https://a.bestcontentweb.top/"], :root a[href^="https://lobimax.com/"], :root a[href^="https://lead1.pl/"], :root a[href^="https://refpa.top/"], :root a[href^="https://landing.brazzersnetwork.com/"], :root a[href^="https://safesurfingtoday.com/"][href*="?skip="], :root a[href^="https://t.acam.link/"], :root a[href^="https://ads.leovegas.com/redirect.aspx?"], :root a[href^="https://land.brazzersnetwork.com/landing/"], :root [data-css-class="dfp-inarticle"], :root .card-captioned.crd > .crd--cnt > .s2nPlayer, :root a[href^="https://go.tmrjmp.com"], :root a[href^="https://startgamIng.Net/tienda/"], :root a[href^="https://l.hyenadata.com/"], :root a[href^="https://yourperfectdating.life/"], :root a[href^="https://join.virtuallust3d.com/"], :root a[href^="https://kiksajex.com/"], :root a[href^="https://juicyads.in/"], :root a[href^="https://mediaserver.gvcaffiliates.com/renderBanner.do?"], :root a[href^="https://join.dreamsexworld.com/"], :root a[href^="https://itubego.com/video-downloader/?affid="], :root a[href^="https://iqbroker.com/"][href*="?aff="], :root a[href^="https://incisivetrk.cvtr.io/click?"], :root a[href^="https://hot-growngames.life/"], :root [data-revive-zoneid], :root a[href^="https://googleads.g.doubleclick.net/pcs/click"], :root a[href^="https://t.ajump1.com/"], :root a[href^="https://clk.wrenchsound.store/"], :root a[href^="https://go.zybrdr.com"], :root [href^="http://join.michelle-austin.com/"], :root [class^="tile-picker__CitrusBannerContainer-sc-"], :root a[href^="https://go.xxxiijmp.com"], :root a[href^="https://go.xtbaffiliates.com/"], :root a[href^="https://thaudray.com/"], :root .OUTBRAIN[data-widget-id^="FMS_REELD_"], :root [data-role="tile-ads-module"], :root a[href^="https://adsrv4k.com/"], :root a[href^="https://go.xlviirdr.com"], :root a[href^="https://ismlks.com/"], :root a[href^="//a.bestcontentfare.top/"], :root [href^="https://www.mypillow.com/"] > img, :root a[href^="https://azpresearch.club/"], :root a[href^="https://go.xlirdr.com"], :root a[href^="https://go.skinstrip.net"][href*="?campaignId="], :root a[href^="https://go.markets.com/visit/?bta="], :root a[href^="https://billing.purevpn.com/aff.php"] > img, :root a[href^="https://go.hpyrdr.com/"], :root a[href^="https://go.goaserv.com/"], :root a[href^="https://go.dmzjmp.com"], :root a[href^="https://go.admjmp.com/"], :root [href^="https://kingered-banctours.com/"], :root a[href^="https://get.surfshark.net/aff_c?"][href*="&aff_id="] > img, :root a-ad, :root a[href^="https://affiliate.rusvpn.com/click.php?"], :root a[href^="https://geniusdexchange.com/"], :root a[href^="https://frameworkdeserve.com/"], :root a[href^="https://flirtandsweets.life/"], :root a[href^="https://www.mrskin.com/tour"], :root a[href^="https://financeads.net/tc.php?"], :root div[data-native-ad], :root a[href^="https://engine.trackingdesks.com/"], :root a[data-redirect^="https://paid.outbrain.com/network/redir?"], :root [href^="https://www.reimageplus.com/"], :root a[href^="https://ak.hauchiwu.com/"], :root a[href^="https://engine.phn.doublepimp.com/"], :root a[href^="https://engine.blueistheneworanges.com/"], :root a[href^="https://dl-protect.net/"], :root [href="//jjgirls.com/sex/ChaturbateCams"], :root a[href^="https://datingoffers30.info/"], :root a[href^="https://ctosrd.com/"], :root a[href^="https://clixtrac.com/"], :root a[href^="https://click.linksynergy.com/fs-bin/"] > img, :root ad-shield-ads, :root a[href^="https://sTartGAMinG.net/tienda/"], :root AD-TRIPLE-BOX, :root a[href^="https://click.hoolig.app/"], :root img[src^="https://images.purevpnaffiliates.com"], :root a[href^="https://porntubemate.com/"], :root a[href^="http://www.gfrevenge.com/landing/"], :root a[href^="https://clickadilla.com/"], :root a[href^="https://click.dtiserv2.com/"], :root a[href^="https://go.xlvirdr.com"], :root a[href^="http://www.iyalc.com/"], :root a[href^="https://claring-loccelkin.com/"], :root a[href^="https://chaturbate.com/in/?track="], :root a[href^="https://chaturbate.com/in/?tour="], :root a[href^="https://cams.imagetwist.com/in/?track="], :root a[href^="https://go.gldrdr.com/"], :root a[href^="https://buqkrzbrucz.com/"], :root a[href^="https://affcpatrk.com/"], :root a[href^="https://bongacams2.com/track?"], :root a[href^="https://www.sheetmusicplus.com/"][href*="?aff_id="], :root a[href^="https://bngpt.com/"], :root a[href^="https://bluedelivery.pro/"], :root a[href^="https://black77854.com/"], :root a[href^="https://bc.game/"], :root a[href^="https://ndt5.net/"], :root a[href^="https://batheunits.com/"], :root a[target="_blank"][onmousedown="this.href^='http://paid.outbrain.com/network/redir?"], :root a[href^="https://banners.livepartners.com/"], :root a[href^="//whulsaux.com/"], :root a[href^="https://m.do.co/c/"] > img, :root [class^="s2nPlayer"], :root a[href^="https://chaturbate.jjgirls.com/?track="], :root a[href^="https://ausoafab.net/"], :root a[href^="https://t.ajrkm1.com/"], :root [href="https://masstortfinancing.com"] img, :root a[href^="https://bongacams10.com/track?"], :root a[href^="https://albionsoftwares.com/"], :root a[href^="https://go.etoro.com/"] > img, :root a[href^="https://convertmb.com/"], :root a[href^="https://spo-play.live/"], :root a[href^="https://join.sexworld3d.com/track/"], :root a[href^="https://intenseaffiliates.com/redirect/"], :root a[href^="https://ads.ad4game.com/"], :root [id^="google_ads_iframe"], :root a[href^="https://syndication.optimizesrv.com/"], :root a[href^="https://affpa.top/"], :root a[href^="https://adnetwrk.com/"], :root a[href^="https://adjoincomprise.com/"], :root [href^="http://misslinkvocation.com/"], :root a[href^="https://adclick.g.doubleclick.net/"], :root a[href^="https://www.bet365.com/"][href*="affiliate="], :root [href^="https://r.kraken.com/"], :root a[href^="https://mmwebhandler.aff-online.com/"], :root a[href^="https://go.nordvpn.net/aff"] > img, :root [href^="http://clicks.totemcash.com/"], :root a[href^="https://misspkl.com/"], :root a[href^="https://ad.zanox.com/ppc/"] > img, :root a[href^="https://ad.kubiccomps.icu/"], :root a[href^="https://ab.advertiserurl.com/aff/"], :root a[href^="https://a2.adform.net/"], :root a[href^="https://iactrivago.ampxdirect.com/"], :root a[href^="https://a.medfoodhome.com/"], :root a[href^="https://adultfriendfinder.com/go/"], :root a[href^="https://a.bestcontentoperation.top/"], :root a[href^="http://static.fleshlight.com/images/banners/"], :root a[href^="https://a.adtng.com/"], :root [data-m-ad-id], :root a[href^="https://sTartgAminG.net/tienda/"], :root a[href^="https://a-ads.com/"], :root a[href^="https://join.virtualtaboo.com/track/"], :root a[href^="https://StarTGAminG.net/tienda/"], :root a[href^="https://STaRTgamINg.net/tienda/"], :root a[href^="http://www.mrskin.com/tour"], :root a[href^="https://agacelebir.com/"], :root a[href^="https://spygasm.com/track?"], :root ins.adsbygoogle, :root a[href^="https://1startfiledownload1.com/"], :root a[href^="https://s.zlinkb.com/"], :root a[href^="http://d2.zedo.com/"], :root a[href^="http://www.friendlyduck.com/AF_"], :root a[href^="http://trk.globwo.online/"], :root a[href^="https://1betandgonow.com/"], :root a[href^="https://prf.hn/click/"][href*="/creativeref:"] > img, :root a[href^="http://www.adultempire.com/unlimited/promo?"][href*="&partner_id="], :root a[href^="http://traffic.tc-clicks.com/"], :root a[href^="http://tour.mrskin.com/"], :root [href^="https://wct.link/"], :root [data-desktop-ad-id], :root a[href^="https://www.purevpn.com/"][href*="&utm_source=aff-"], :root a[href^="http://m.hue2m.com/"], :root a[href^="https://funkydaters.com/"], :root [id^="ad_sky"], :root a[href^="http://https://www.get-express-vpn.com/offer/"], :root div[id^="google_dfp_"], :root a[href^="http://googleads.g.doubleclick.net/pcs/click"], :root [href^="http://go.cm-trk2.com/"], :root a[href^="http://click.payserve.com/"], :root a[href^="https://porngames.adult/?SID="], :root a[href^="https://landing1.brazzersnetwork.com"], :root #slashboxes > .deals-rail, :root [href^="http://globsads.com/"], :root [href^="https://www.brighteonstore.com/products/"] img, :root a[href^="http://bc.vc/?r="], :root a[href^="https://mityneedn.com/"], :root [href^="http://homemoviestube.com/"], :root a[href^="http://ad.doubleclick.net/"], :root a[href^="//zunsoach.com/"], :root a[href^="//s.st1net.com/splash.php"], :root a[href^="//pubads.g.doubleclick.net/"], :root a[href^="https://femglobal.app/"], :root a[href^="//go.eabids.com/"], :root [id^="div-gpt-ad"], :root .ob_container .item-container-obpd, :root div[id^="yandex_ad"], :root a[href^="https://pb-imc.com/"], :root a[href^="http://deskfrontfreely.com/"], :root a[data-url^="http://paid.outbrain.com/network/redir?"] + .author, :root [href^="https://join.playboyplus.com/track/"], :root a[href^="//ardslediana.com/"], :root [data-d-ad-id], :root a[href*=".engine.adglare.net/"], :root #kt_player > a[target="_blank"], :root a[href*=".cfm?fp="][href*="&maxads="], :root [data-ad-width], :root [href^="https://cpa.10kfreesilver.com/"], :root a[href^="https://a.bestcontentfood.top/"], :root a[href^="http://wct.link/"], :root [href^="https://goldforyourfuture.com/clk.trk"] img, :root [onclick^="location.href='http://www.reimageplus.com"], :root [id^="section-ad-banner"], :root a[href^="https://t.aslnk.link/"], :root a[href^="https://click.candyoffers.com/"], :root [href^="https://zstacklife.com/"] img, :root a[href^="https://go.julrdr.com/"], :root .trc_rbox_div .syndicatedItemUB, :root [href^="https://zone.gotrackier.com/"], :root a[href^="https://fourwhenstatistics.com/"], :root [href^="https://detachedbates.com/"], :root [href^="https://www.targetingpartner.com/"], :root .section-subheader > .section-hotel-prices-header, :root [href^="https://go.affiliatexe.com/"], :root [href^="https://www.hostg.xyz/"] > img, :root a[href^="http://adultfriendfinder.com/go/"], :root a[href^="https://maymooth-stopic.com/"], :root [href^="https://www.herbanomic.com/"] > img, :root div[id^="ad-position-"], :root a[href^="http://affiliate.glbtracker.com/"], :root a[href^="https://leg.xyz/?track="], :root div[id^="crt-"][style], :root a[href^="http://adultgames.xxx/"], :root a[href^="https://bngprm.com/"], :root [href^="https://shiftnetwork.infusionsoft.com/go/"] > img, :root a[href^="https://trk.softonixs.xyz/"], :root [href^="https://www.mypatriotsupply.com/"] > img, :root a[onmousedown^="this.href='http://paid.outbrain.com/network/redir?"][target="_blank"], :root [href^="https://secure.bmtmicro.com/servlets/"], :root [href="https://ourgoldguy.com/contact/"] img, :root a[href^="https://brightadnetwork.com/"], :root a[href^="http://www.onwebcam.com/random?t_link="], :root [href^="https://www.avantlink.com/click.php"] img, :root a[href^="https://losingoldfry.com/"], :root [data-wpas-zoneid], :root .scroll-fixable.rail-right > .deals-rail, :root [href^="https://routewebtk.com/"], :root a[href^="https://oackoubs.com/"], :root a[href^="https://ak.psaltauw.net/"], :root a[href^="https://go.cmtaffiliates.com/"], :root [data-name="adaptiveConstructorAd"], :root [href^="https://optimizedelite.com/"] > img, :root a[href^="https://awptjmp.com/"], :root a[href^="https://go.goasrv.com/"], :root [href^="http://mypillow.com/"] > img, :root a[href^="http://bongacams.com/track?"], :root a[href^="https://fleshlight.sjv.io/"], :root [data-ad-manager-id], :root a[href^="https://promo-bc.com/"], :root a[href^="https://clicks.pipaffiliates.com/"], :root [href^="https://noqreport.com/"] > img, :root [href^="https://mylead.global/stl/"] > img, :root [href^="https://mypatriotsupply.com/"] > img, :root [data-freestar-ad], :root a[href^="https://fc.lc/ref/"], :root .vid-present > .van_vid_carousel__padding, :root span[data-ez-ph-id], :root [href^="https://track.aftrk1.com/"], :root div[id^="adngin-"], :root [data-rc-widget], :root a[href^="https://go.xxxijmp.com"], :root [href^="https://istlnkcl.com/"], :root a[href^="https://staRTgaming.net/tienda/"], :root a[href^="https://STaRtgAmInG.net/tienda/"], :root [href^="https://ilovemyfreedoms.com/landing-"], :root [href^="https://go.xlrdr.com"], :root [href^="https://go.4rabettraff.com/"], :root a[href^="https://tm-offers.gamingadult.com/"], :root [href^="https://charmingdatings.life/"], :root [href^="https://glersakr.com/"], :root a[href^="https://italarizege.xyz/"], :root a[href^="https://wittered-mainging.com/"], :root [href^="https://engine.gettopple.com/"], :root [data-id^="div-gpt-ad"], :root a[href^="https://tracker.loropartners.com/"], :root [href^="https://awbbjmp.com/"], :root a[href^="https://k2s.cc/pr/"], :root [href^="https://affect3dnetwork.com/track/"], :root a[href^="https://camfapr.com/landing/click/"], :root [href="//sexcams.plus/"], :root a[href^="https://go.currency.com/"], :root div[id^="advads_ad_"], :root .resultsList > div > div > div > div[data-resultid$="-sponsored"], :root [href^="http://www.mypillow.com/"] > img, :root a[href^="https://adserver.adreactor.com/"], :root [href^="http://join.shemalesfromhell.com/"], :root a[href^="https://ads.betfair.com/redirect.aspx?"], :root [href^="http://www.fleshlightgirls.com/"], :root [href^="http://join.trannies-fuck.com/"], :root .trc_rbox .syndicatedItem, :root a[href^="http://cam4com.go2cloud.org/aff_c?"], :root a[href^="https://cpmspace.com/"], :root [href^="https://freecourseweb.com/"] > .sitefriend, :root a[href^="https://ads.planetwin365affiliate.com/redirect.aspx?"], :root [href^="http://join.rodneymoore.com/"], :root [href^="https://shrugartisticelder.com"], :root a[href^="https://staRTgamIng.net/tienda/"], :root div[id^="lazyad-"], :root a[href^="http://com-1.pro/"], :root [name^="google_ads_iframe"], :root a[href^="http://bodelen.com/"], :root [href="https://www.masstortfinancing.com/"] > img, :root a[href^="https://www.geekbuying.com/dynamic-ads/"], :root a[href^="https://lnkxt.bannerator.com/"], :root [href="https://jdrucker.com/gold"] > img, :root [href^="https://v.investologic.co.uk/"], :root [href^="https://cipledecline.buzz/"], :root a[href^="https://go.xxxjmp.com"], :root #leader-companion > a[href], :root a[href^="https://jaxofuna.com/"], :root div[recirculation-ad-container], :root [href^="https://traffserve.com/"], :root [id^="ad_slider"], :root [data-adbridg-ad-class], :root a[href^="http://www.adultdvdempire.com/?partner_id="][href*="&utm_"], :root [href^="http://join.shemale.xxx/"], :root div[id^="div-ads-"], :root [href^="https://rapidgator.net/article/premium/ref/"], :root [href^="https://join3.bannedsextapes.com"], :root div[data-spotim-slot], :root [href^="https://antiagingbed.com/discount/"] > img, :root a[href^="https://go.247traffic.com/"], :root [href^="https://join.girlsoutwest.com/"], :root [href^="http://trafficare.net/"], :root [data-type="ad-vertical"], :root a[href^="https://u.expresstech.io/"], :root [href^="https://mypillow.com/"] > img, :root [href^="https://ad.admitad.com/"], :root [data-testid="ad_testID"], :root [href^="https://goldcometals.com/clk.trk"], :root a[href^="https://bodelen.com/"], :root [data-ad-name], :root a[href*=".g2afse.com/"], :root a[href^="https://go.hpyjmp.com"], :root a[href^="https://tour.mrskin.com/"], :root a[href^="https://fastestvpn.com/lifetime-special-deal?a_aid="], :root [href^="https://mystore.com/"] > img, :root [data-mobile-ad-id], :root [data-ez-name], :root a[data-widget-outbrain-redirect^="http://paid.outbrain.com/network/redir?"], :root [data-dynamic-ads], :root a[href^="http://go.xtbaffiliates.com/"], :root a[href^="https://consali.com/"], :root .grid > .container > #aside-promotion, :root DFP-AD, :root [onclick*="content.ad/"], :root AMP-AD, :root a[href^="https://sTartGAMiNG.net/tienda/"], :root [data-ad-cls], :root [id^="ad-wrap-"], :root div[id^="taboola-stream-"], :root [href^="https://go.astutelinks.com/"], :root a[href^="http://tc.tradetracker.net/"] > img, :root a[href^="http://affiliates.thrixxx.com/"], :root a[href^="https://www.adultempire.com/"][href*="?partner_id="], :root [data-template-type="nativead"], :root [class^="amp-ad-"], :root [href^="https://affiliate.fastcomet.com/"] > img, :root [class^="adDisplay-module"], :root AD-SLOT, :root .ob_dual_right > .ob_ads_header ~ .odb_div, :root a[href^="https://www.liquidfire.mobi/"], :root [href^="https://click2cvs.com/"], :root .trc_related_container div[data-item-syndicated="true"], :root [href^="http://join.shemalepornstar.com/"], :root a[href^="https://go.xlviiirdr.com"], :root .trc_rbox_div .syndicatedItem, :root .plistaList > .itemLinkPET, :root [href^="https://gmxvmvptfm.com/"], :root div[data-adunit], :root app-large-ad, :root [href^="https://turtlebids.irauctions.com/"] img, :root a[href^="https://www.adskeeper.com"], :root [href^="https://totlnkcl.com/"], :root [data-ad-module], :root a[data-oburl^="https://paid.outbrain.com/network/redir?"], :root div[data-ad-targeting], :root a[href^="https://hotplaystime.life/"], :root a[href^="http://www.h4trck.com/"], :root [href^="https://trackfin.asia/"], :root .plistaList > .plista_widget_underArticle_item[data-type="pet"], :root a[href^="https://bs.serving-sys.com"], :root [href^="http://residenceseeingstanding.com/"], :root div[id^="pa_sticky_ad_box_middle_"], :root a[href^="http://www.onclickmega.com/jump/next.php?"], :root .trc_rbox_border_elm .syndicatedItem, :root a[href*="//lkstrck2.com/"], :root [class^="div-gpt-ad"], :root a[href^="https://ggbetpromo.com/"], :root a[href^="http://partners.etoro.com/"], :root [data-advadstrackid], :root a[href^="https://refpazkjixes.top/"], :root #mgb-container > #mgb, :root [href^="https://www.cloudways.com/en/?id"], :root [href^="https://safer-redirection.com"], :root a[href^="https://startgAming.net/tienda/"], :root a[href^="https://tweakostensibleinstaller.com/"], :root a[href^="https://go.xlivrdr.com"], :root a[href^="https://cam4com.go2cloud.org/"], :root a[href^="http://li.blogtrottr.com/click?"], :root [href^="//mage98rquewz.com/"], :root a[href^="https://webroutetrk.com/"], :root a[href^="https://mercurybest.com/"], :root [href^="https://www.restoro.com/"], :root div[id^="optidigital-adslot"], :root .resultsList > div > div > div > div.G-5c[role="tab"][tabindex="0"] > .yuAt-pres-rounded { display: none !important; }</style><link rel="stylesheet" href="./lounge.9ecc932a2b06b92c22eb40c10dc190b3.css"><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="lounge/main" src="./lounge.bundle.06bbf2e55f6b3c3ce56cac700785d684.js.download"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="remote/config" src="./config.js.download"></script><style id="css_1716629052064"></style><!--<base target="_parent">--><base href="." target="_parent"><style type="text/css">@import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,600;0,700;1,400;1,700&display=swap"); body.roboto , body.roboto input, body.roboto select, body.roboto textarea { font-family: Roboto, sans-serif; }</style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="fb" src="./sdk(1).js.download"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="gapi" src="./api.js.download" gapi_processed="true"></script><style type="text/css" data-fbcssmodules="css:fb.css.base css:fb.css.dialog css:fb.css.iframewidget css:fb.css.customer_chat_plugin_iframe">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:'lucida grande', tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:'lucida grande', tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_dialog_advanced{border-radius:8px;padding:10px}.fb_dialog_content{background:#fff;color:#373737}.fb_dialog_close_icon{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{left:5px;right:auto;top:5px}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://connect.facebook.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://connect.facebook.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{height:100%;left:0;margin:0;overflow:visible;position:absolute;top:-10000px;transform:none;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://connect.facebook.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{background:none;height:auto;min-height:initial;min-width:initial;width:auto}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{clear:both;color:#fff;display:block;font-size:18px;padding-top:20px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .4);bottom:0;left:0;min-height:100%;position:absolute;right:0;top:0;width:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_mobile .fb_dialog_iframe{position:sticky;top:0}.fb_dialog_content .dialog_header{background:linear-gradient(from(#738aba), to(#2c4987));border-bottom:1px solid;border-color:#043b87;box-shadow:white 0 1px 1px -1px inset;color:#fff;font:bold 14px Helvetica, sans-serif;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:linear-gradient(from(#4267B2), to(#2a4887));background-clip:padding-box;border:1px solid #29487d;border-radius:3px;display:inline-block;line-height:18px;margin-top:3px;max-width:85px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{background:none;border:none;color:#fff;font:bold 12px Helvetica, sans-serif;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://connect.facebook.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #4a4a4a;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f5f6f7;border:1px solid #4a4a4a;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://connect.facebook.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-position:50% 50%;background-repeat:no-repeat;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}
.fb_mpn_mobile_landing_page_slide_out{animation-duration:200ms;animation-name:fb_mpn_landing_page_slide_out;transition-timing-function:ease-in}.fb_mpn_mobile_landing_page_slide_out_from_left{animation-duration:200ms;animation-name:fb_mpn_landing_page_slide_out_from_left;transition-timing-function:ease-in}.fb_mpn_mobile_landing_page_slide_up{animation-duration:500ms;animation-name:fb_mpn_landing_page_slide_up;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_in{animation-duration:300ms;animation-name:fb_mpn_bounce_in;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_out{animation-duration:300ms;animation-name:fb_mpn_bounce_out;transition-timing-function:ease-in}.fb_mpn_mobile_bounce_out_v2{animation-duration:300ms;animation-name:fb_mpn_fade_out;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_v2{animation-duration:300ms;animation-name:fb_bounce_in_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_in_from_left{animation-duration:300ms;animation-name:fb_bounce_in_from_left;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_v2{animation-duration:300ms;animation-name:fb_bounce_out_v2;transition-timing-function:ease-in}.fb_customer_chat_bounce_out_from_left{animation-duration:300ms;animation-name:fb_bounce_out_from_left;transition-timing-function:ease-in}.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}@keyframes fb_mpn_landing_page_slide_out{0%{margin:0 12px;width:100% - 24px}60%{border-radius:18px}100%{border-radius:50%;margin:0 24px;width:60px}}@keyframes fb_mpn_landing_page_slide_out_from_left{0%{left:12px;width:100% - 24px}60%{border-radius:18px}100%{border-radius:50%;left:12px;width:60px}}@keyframes fb_mpn_landing_page_slide_up{0%{bottom:0;opacity:0}100%{bottom:24px;opacity:1}}@keyframes fb_mpn_bounce_in{0%{opacity:.5;top:100%}100%{opacity:1;top:0}}@keyframes fb_mpn_fade_out{0%{bottom:30px;opacity:1}100%{bottom:0;opacity:0}}@keyframes fb_mpn_bounce_out{0%{opacity:1;top:0}100%{opacity:.5;top:100%}}@keyframes fb_bounce_in_v2{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}50%{transform:scale(1.03, 1.03);transform-origin:bottom right}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}}@keyframes fb_bounce_in_from_left{0%{opacity:0;transform:scale(0, 0);transform-origin:bottom left}50%{transform:scale(1.03, 1.03);transform-origin:bottom left}100%{opacity:1;transform:scale(1, 1);transform-origin:bottom left}}@keyframes fb_bounce_out_v2{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom right}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom right}}@keyframes fb_bounce_out_from_left{0%{opacity:1;transform:scale(1, 1);transform-origin:bottom left}100%{opacity:0;transform:scale(0, 0);transform-origin:bottom left}}@keyframes slideInFromBottom{0%{opacity:.1;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}@keyframes slideInFromBottomDelay{0%{opacity:0;transform:translateY(100%)}97%{opacity:0;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}</style></head>
<body class="roboto dark-anchor">
    

    
    <div id="error" class="alert--error">
        <p>We were unable to load Disqus. If you are a moderator please see our <a href="https://docs.disqus.com/help/83/"> troubleshooting guide</a>. </p>
    </div>

    
    <script type="text/json" id="disqus-forumData">{"session":{"canModerate":false,"audienceSyncVerified":false,"canReply":true,"mustVerify":false,"recaptchaPublicKey":"6Lfx6u0SAAAAAI1QkeTW397iQv1MsBfbDaYlwxK_","mustVerifyEmail":false},"forum":{"aetBannerConfirmation":null,"founder":"113374668","twitterName":"","commentsLinkOne":"1 Comment","guidelines":null,"favicon":{"permalink":"https://disqus.com/api/forums/favicons/stm32f4discoverycom.jpg","cache":"https://c.disquscdn.com/uploads/forums/309/9287/favicon.png"},"commentsLinkZero":"0 Comments","disableDisqusBranding":false,"id":"stm32f4discoverycom","createdAt":"2014-07-06T18:03:16.275476","category":"Tech","aetBannerEnabled":false,"aetBannerTitle":null,"raw_guidelines":null,"initialCommentCount":null,"votingType":null,"daysUnapproveNewUsers":null,"installCompleted":true,"moderatorBadgeText":"Admin","commentPolicyText":null,"aetEnabled":false,"channel":null,"sort":4,"description":"","newPolicy":true,"raw_description":"","customFont":null,"language":"en","adsReviewStatus":0,"commentsPlaceholderTextEmpty":null,"daysAlive":0,"forumCategory":{"date_added":"2016-01-28T01:54:31","id":8,"name":"Tech"},"linkColor":null,"colorScheme":"auto","pk":"3099287","commentsPlaceholderTextPopulated":null,"permissions":{},"commentPolicyLink":null,"aetBannerDescription":null,"name":"STM32F4-Discovery","commentsLinkMultiple":"{num} Comments","settings":{"threadRatingsEnabled":false,"adsDRNativeEnabled":false,"behindClickEnabled":false,"disable3rdPartyTrackers":false,"adsVideoEnabled":false,"adsProductVideoEnabled":false,"adsPositionTopEnabled":false,"ssoRequired":false,"unapproveLinks":false,"adsPositionRecommendationsEnabled":true,"linkAffiliationEnabled":true,"adsProductLinksThumbnailsEnabled":false,"hasCustomAvatar":false,"organicDiscoveryEnabled":true,"adsProductDisplayEnabled":false,"adsProductLinksEnabled":false,"audienceSyncEnabled":false,"threadReactionsEnabled":false,"adsEnabled":false,"disableSocialShare":false,"allowAnonPost":true,"adsProductStoriesEnabled":false,"sidebarEnabled":false,"adultContent":false,"allowAnonVotes":false,"gifPickerEnabled":true,"mustVerify":true,"badgesEnabled":false,"mustVerifyEmail":true,"unapproveNewUsersEnabled":false,"mediaembedEnabled":true,"userIdentityDisabled":false,"adsPositionBottomEnabled":false,"discoveryLocked":false,"validateAllPosts":false,"adsSettingsLocked":false,"isVIP":false,"adsPositionInthreadEnabled":false},"organizationId":2306490,"typeface":"auto","url":"http://stm32f4-discovery.com","daysThreadAlive":0,"avatar":{"small":{"permalink":"https://disqus.com/api/forums/avatars/stm32f4discoverycom.jpg?size=32","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"https://disqus.com/api/forums/avatars/stm32f4discoverycom.jpg?size=92","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"}},"signedUrl":"http://disq.us/?url=http%3A%2F%2Fstm32f4-discovery.com&key=za5Vg1SoXTptw4e5Td894A"}}</script>

    <script type="text/json" id="disqus-threadData">{"cursor":{"hasPrev":false,"prev":null,"total":62,"hasNext":true,"next":"1:0:0"},"code":0,"response":{"lastModified":1715466637,"posts":[{"editableUntil":"2020-03-02T07:37:35","dislikes":0,"thread":"5966865871","numReports":0,"likes":4,"message":"\u003cp>Hello Mr. Tilen!\u003c/p>\u003cp>I found this post extremely useful for configuring UART with DMA. I would like to discuss a situation found by one of our customers and hope you could shed some light on this issue if you have time.\u003cbr>We have an STM32F4 device that transmits message through UART from at 115200 baud rate. Our customer is receiving these messages with an STM32 device as well. He uses the IDLE line interrupt to detect end of transmitted message. However, we find \"idle frames\" in the message before the transmission is complete.\u003cbr>I've seen people describing similar issues online but would like to better understand the cause and a better way of detecting end of transmission in this case.\u003c/p>\u003cp>Many thanks,\u003c/p>\u003cp>Zitong\u003c/p>","id":"4807305835","createdAt":"2020-02-24T07:37:35","author":{"username":"disqus_LwFYV2MDax","about":"","name":"Zitong Zhang","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-24T07:28:29","profileUrl":"https://disqus.com/by/disqus_LwFYV2MDax/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"345228748","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar128.jpg?1582540611"},"cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar92.jpg?1582540611","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar92.jpg?1582540611"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar32.jpg?1582540611"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hello Mr. Tilen!\n\nI found this post extremely useful for configuring UART with DMA. I would like to discuss a situation found by one of our customers and hope you could shed some light on this issue if you have time.\nWe have an STM32F4 device that transmits message through UART from at 115200 baud rate. Our customer is receiving these messages with an STM32 device as well. He uses the IDLE line interrupt to detect end of transmitted message. However, we find \"idle frames\" in the message before the transmission is complete.\nI've seen people describing similar issues online but would like to better understand the cause and a better way of detecting end of transmission in this case.\n\nMany thanks,\n\nZitong","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":4,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-03-02T07:47:29","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>After doing some homework, I think there might be two possibilities.\u003cbr>1. The DMA arbitrator handling different DMA channels;\u003cbr>2. The bus matrix denying the DMA access temporarily;\u003cbr>I do not have access to our source code at the moment so I am just making guesses. And I haven't learned microcontrollers formally so please forgive me if I've made any mistakes.\u003cbr>Thanks again!\u003cbr>Zitong\u003c/p>","id":"4807309878","createdAt":"2020-02-24T07:47:29","author":{"username":"disqus_LwFYV2MDax","about":"","name":"Zitong Zhang","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-24T07:28:29","profileUrl":"https://disqus.com/by/disqus_LwFYV2MDax/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"345228748","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar128.jpg?1582540611"},"cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar92.jpg?1582540611","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar92.jpg?1582540611"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar32.jpg?1582540611"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4807305835,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"After doing some homework, I think there might be two possibilities.\n1. The DMA arbitrator handling different DMA channels;\n2. The bus matrix denying the DMA access temporarily;\nI do not have access to our source code at the moment so I am just making guesses. And I haven't learned microcontrollers formally so please forgive me if I've made any mistakes.\nThanks again!\nZitong","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-03-02T07:41:56","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>\u003ca href=\"http://disq.us/url?url=%23%3ANO3CDrWS14R4hWRRS0InrMYHb9Y&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"#\">http://www.chibios.com/forum/viewtopic.php?t=3441#p26203\u003c/a>\u003cbr>barthess commented: \"Out custom GNSS receiver produces too much IDLE frames (with exactly 10-bit len) in random\u003cbr>places. So I decided to use hardware timeout feature. It works as expected too. Now interrupt\u003cbr>comes after the whole message receiving.\"\u003c/p>\u003cp>\u003ca href=\"http://disq.us/url?url=%23%3ANO3CDrWS14R4hWRRS0InrMYHb9Y&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"#\">https://ihuifeng.cc/2018/08/15/STM32_UART_IDLE_DMA%E6%8E%A5%E6%94%B6/\u003c/a>\u003cbr>This post is unfortunately Chinese but there are two oscilloscope pictures that are identical to what we've seen. The first one showing the expected behaviour where the yellow pulse occurs after the stream of data. The second picture shows a \"premature\" IDLE line interrupt due to the idle frames in the message.\u003c/p>","id":"4807307638","createdAt":"2020-02-24T07:41:56","author":{"username":"disqus_LwFYV2MDax","about":"","name":"Zitong Zhang","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-24T07:28:29","profileUrl":"https://disqus.com/by/disqus_LwFYV2MDax/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"345228748","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar128.jpg?1582540611"},"cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar92.jpg?1582540611","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar92.jpg?1582540611"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar32.jpg?1582540611"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4807305835,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"\u003ca href=\"#\">http://www.chibios.com/forum/viewtopic.php?t=3441#p26203\u003c/a>\nbarthess commented: \"Out custom GNSS receiver produces too much IDLE frames (with exactly 10-bit len) in random\nplaces. So I decided to use hardware timeout feature. It works as expected too. Now interrupt\ncomes after the whole message receiving.\"\n\n\u003ca href=\"#\">https://ihuifeng.cc/2018/08/15/STM32_UART_IDLE_DMA%E6%8E%A5%E6%94%B6/\u003c/a>\nThis post is unfortunately Chinese but there are two oscilloscope pictures that are identical to what we've seen. The first one showing the expected behaviour where the yellow pulse occurs after the stream of data. The second picture shows a \"premature\" IDLE line interrupt due to the idle frames in the message.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":["links"],"isEdited":true,"sb":false},{"editableUntil":"2020-03-02T10:15:31","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>This is not the approach you are looking for. IDLE line can be used to detect potential end of message, not to rely only on it. You use IDLE line to understand that something was there, but what exactly was is defined by your protocol. So on IDLE event, you have to check received data and decide if this is end of not. If you are receiving many IDLE events is actually an advantage.\u003c/p>\u003cp>Imagine what will happen if your receiver sends data to MCU and there is for some reason higher delay than RTO is configured?\u003c/p>","id":"4807379053","createdAt":"2020-02-24T10:15:31","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4807307638,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"This is not the approach you are looking for. IDLE line can be used to detect potential end of message, not to rely only on it. You use IDLE line to understand that something was there, but what exactly was is defined by your protocol. So on IDLE event, you have to check received data and decide if this is end of not. If you are receiving many IDLE events is actually an advantage.\n\nImagine what will happen if your receiver sends data to MCU and there is for some reason higher delay than RTO is configured?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":2,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-03-02T10:36:50","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>Thank you for the prompt reply, Mr. Tilen!\u003cbr>You are right. RTO is arbitrary and we still need to check the integrity of the message. I just think RTO is relatively more predictable than a single IDLE event in this case. Also, as you said, having many IDLE events suggests a more likely end of line but again it shouldn't be the only criteria.\u003c/p>","id":"4807390009","createdAt":"2020-02-24T10:36:50","author":{"username":"disqus_LwFYV2MDax","about":"","name":"Zitong Zhang","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2020-02-24T07:28:29","profileUrl":"https://disqus.com/by/disqus_LwFYV2MDax/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"345228748","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar128.jpg?1582540611"},"cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar92.jpg?1582540611","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar92.jpg?1582540611"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_LwFYV2MDax.jpg","cache":"https://c.disquscdn.com/uploads/users/34522/8748/avatar32.jpg?1582540611"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4807379053,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thank you for the prompt reply, Mr. Tilen!\nYou are right. RTO is arbitrary and we still need to check the integrity of the message. I just think RTO is relatively more predictable than a single IDLE event in this case. Also, as you said, having many IDLE events suggests a more likely end of line but again it shouldn't be the only criteria.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":3,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-03-02T16:18:33","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>First thing I would suggest is to take logic analyzer and observe data on RX line (from MCU perspective) to understand timing. If there is one character timeout in between, then it is normal you receive so many idle time interrupts and RTO will help you decreasing frequency of received events. But this is only an indication, you should not, by any means, rely on the fact that RTO means end of line, like you said in your latest comment.\u003c/p>","id":"4807740352","createdAt":"2020-02-24T16:18:33","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4807390009,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"First thing I would suggest is to take logic analyzer and observe data on RX line (from MCU perspective) to understand timing. If there is one character timeout in between, then it is normal you receive so many idle time interrupts and RTO will help you decreasing frequency of received events. But this is only an indication, you should not, by any means, rely on the fact that RTO means end of line, like you said in your latest comment.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":4,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2018-01-03T08:32:36","dislikes":0,"thread":"5966865871","numReports":0,"likes":2,"message":"\u003cp>This approach doesn't seem to work properly for STM32F1xx.\u003cbr>I have a device with both F405 and F107. Disabling a DMA stream in the UART IDLE interrupt handler generates a TC interrupt for DMA on F405 MCU, but doesn't lead to a TC interrupt on F107 MCU. In the idle interrupt handler I can see NDTR register has a proper number of remaining bytes. DMA interrupt is working properly, when I request to transfer only few bytes and send this number of bytes over UART.\u003c/p>\u003cp> As a workaround we can try to move bytes from DMA buffer to task buffer in the IDLE interrupt handler.\u003c/p>","id":"3679881364","createdAt":"2017-12-27T08:32:36","author":{"username":"grigoritimonen","about":"","name":"Grigori Timonen","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2013-11-07T07:44:04","profileUrl":"https://disqus.com/by/grigoritimonen/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"80767278","avatar":{"permalink":"https://disqus.com/api/users/avatars/grigoritimonen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/grigoritimonen.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/grigoritimonen.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/grigoritimonen.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"This approach doesn't seem to work properly for STM32F1xx.\nI have a device with both F405 and F107. Disabling a DMA stream in the UART IDLE interrupt handler generates a TC interrupt for DMA on F405 MCU, but doesn't lead to a TC interrupt on F107 MCU. In the idle interrupt handler I can see NDTR register has a proper number of remaining bytes. DMA interrupt is working properly, when I request to transfer only few bytes and send this number of bytes over UART.\n\n As a workaround we can try to move bytes from DMA buffer to task buffer in the IDLE interrupt handler.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":2,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2018-01-03T09:23:37","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>That's true. I've updated the main article on \u003ca href=\"http://disq.us/url?url=http%3A%2F%2Fcommunity.st.com%3A5F6TJq3SXXpKvJsOCQcVV9rGH-4&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"community.st.com\">community.st.com\u003c/a> which I wrote some time ago to give you even better solution for all STM32 families.\u003c/p>","id":"3679906360","createdAt":"2017-12-27T09:23:37","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3679881364,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"That's true. I've updated the main article on community.st.com which I wrote some time ago to give you even better solution for all STM32 families.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":["links"],"isEdited":false,"sb":false},{"editableUntil":"2018-01-03T09:53:58","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>In my case I have a system with sleeping tasks. They are executed on demand. I'd like to receive data without any polling. The Idea is to receive data into task buffer and then to set execution pending flag in the task scheduler. This should happen in IRQ handler. Your approach requires a continuous polling which I would like to avoid.\u003cbr>I found NDTR register and DMA buffer contain right data already in UART IDLE interrupt call. So I disable DMA, transfer data from DMA buffer to taks buffer, set huart-&gt;RxState to ready instead of busy and call HAL_UART_Receive_DMA() for the next portion of data. This all happens in IDLE interrupt handler. Also I left same old DMA data handling the TC handler. It is supposed to work in case we transfer same amount of data than DMA buffer size.\u003cbr>This approach _initially_ seems to work.\u003c/p>","id":"3679922890","createdAt":"2017-12-27T09:53:58","author":{"username":"grigoritimonen","about":"","name":"Grigori Timonen","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2013-11-07T07:44:04","profileUrl":"https://disqus.com/by/grigoritimonen/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"80767278","avatar":{"permalink":"https://disqus.com/api/users/avatars/grigoritimonen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/grigoritimonen.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/grigoritimonen.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/grigoritimonen.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3679906360,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"In my case I have a system with sleeping tasks. They are executed on demand. I'd like to receive data without any polling. The Idea is to receive data into task buffer and then to set execution pending flag in the task scheduler. This should happen in IRQ handler. Your approach requires a continuous polling which I would like to avoid.\nI found NDTR register and DMA buffer contain right data already in UART IDLE interrupt call. So I disable DMA, transfer data from DMA buffer to taks buffer, set huart->RxState to ready instead of busy and call HAL_UART_Receive_DMA() for the next portion of data. This all happens in IDLE interrupt handler. Also I left same old DMA data handling the TC handler. It is supposed to work in case we transfer same amount of data than DMA buffer size.\nThis approach _initially_ seems to work.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":2,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2018-01-03T09:58:56","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>What you have to do is to use DMA in circular mode for start. Then using TC, HT or IDLE interrupts to handle data and copy them to processing queue.\u003c/p>\u003cp>\u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgithub.com%2FMaJerle%2FESP_AT_Lib%2Fblob%2Fmaster%2Fsrc%2Fsystem%2Fesp_ll.c%3ABr5L2IUNeHgD_Sk6V7sth5tqkn8&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"https://github.com/MaJerle/ESP_AT_Lib/blob/master/src/system/esp_ll.c\">https://github.com/MaJerle/...\u003c/a> This is the way how I process data at 4.6Mbits from ESP8266.\u003c/p>","id":"3679925619","createdAt":"2017-12-27T09:58:56","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3679922890,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"What you have to do is to use DMA in circular mode for start. Then using TC, HT or IDLE interrupts to handle data and copy them to processing queue.\n\nhttps://github.com/MaJerle/ESP_AT_Lib/blob/master/src/system/esp_ll.c This is the way how I process data at 4.6Mbits from ESP8266.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":3,"points":0,"moderationLabels":["links"],"isEdited":false,"sb":false},{"editableUntil":"2019-08-29T11:12:54","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>Thanks for the code Tilen;\u003cbr>I have been using USART_DMA_RX_IDLE_LINE_IRQ_F4 How I simply could not make it work.\u003c/p>\u003cp>I have adopted the code to STM32F411 Disc board changing required usart/dma handles and pins. However I haven't been able to receive data. Note that data transition using LL-Drivers seems to work fine. Only Receive part seems busted.\u003c/p>\u003cp>Additionally I have used the STM32F4 Disc board to simply run your code without change. Once again no dice. With a bit of tinkering I again could transmit but failed  to receive.\u003c/p>\u003cp>I have further tried to write a code with reflection to your in both platforms failing to receive at each part. The same problem is resolved simply using HAL instead of LL, however then your method would not work?\u003c/p>\u003cp>Note that I have been using STM32 IDE. Any and all help would be welcomed.\u003c/p>","id":"4587526077","createdAt":"2019-08-22T11:12:54","author":{"username":"mikrosay","about":"","name":"mikrosay","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2019-08-22T11:10:20","profileUrl":"https://disqus.com/by/mikrosay/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"336728448","avatar":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thanks for the code Tilen;\nI have been using USART_DMA_RX_IDLE_LINE_IRQ_F4 How I simply could not make it work.\n\n\nI have adopted the code to STM32F411 Disc board changing required usart/dma handles and pins. However I haven't been able to receive data. Note that data transition using LL-Drivers seems to work fine. Only Receive part seems busted.\n\n\nAdditionally I have used the STM32F4 Disc board to simply run your code without change. Once again no dice. With a bit of tinkering I again could transmit but failed  to receive.\n\n\nI have further tried to write a code with reflection to your in both platforms failing to receive at each part. The same problem is resolved simply using HAL instead of LL, however then your method would not work?\n\n\n\nNote that I have been using STM32 IDE. Any and all help would be welcomed.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2019-08-29T11:43:35","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>Make sure you have checked that all the DMA stream/channel config is OK, that pins are configured as alternate mode, that interrupt vectors for USART/DMA are correct, that you clear right DMA flags, etc.\u003c/p>\u003cp>You can post the code here. Remember, pastebin.\u003c/p>","id":"4587549160","createdAt":"2019-08-22T11:43:35","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4587526077,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Make sure you have checked that all the DMA stream/channel config is OK, that pins are configured as alternate mode, that interrupt vectors for USART/DMA are correct, that you clear right DMA flags, etc.\n\nYou can post the code here. Remember, pastebin.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2019-08-29T13:48:22","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Basically I have 2 Usart enabled, \u003cbr>Usart 2 is usin RS232 architecture and connected to pc via its own TTL. \u003cbr>Usart 6 is using RS485 and requires information direction, hence the pin writes \u003cbr>There is a timer driven blinking light just to show that cpu is alive\u003c/p>\u003cp>Both have active RX dma in circular mode with FIFO closed. Both has their own global interrupts for idle activated\u003c/p>\u003cp>I have double checked pins and channels. I have tried to crop the code as lean as possible and linked it bellow. The code is for the F411 dev board\u003c/p>\u003cp>\u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fpastebin.com%2FDk3f0tPZ%3AdKL3E-fj5YFN11BnzPXxZEFgIn8&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"https://pastebin.com/Dk3f0tPZ\">https://pastebin.com/Dk3f0tPZ\u003c/a>\u003c/p>","id":"4587672871","createdAt":"2019-08-22T13:48:22","author":{"username":"mikrosay","about":"","name":"mikrosay","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2019-08-22T11:10:20","profileUrl":"https://disqus.com/by/mikrosay/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"336728448","avatar":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4587549160,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Basically I have 2 Usart enabled, \nUsart 2 is usin RS232 architecture and connected to pc via its own TTL. \nUsart 6 is using RS485 and requires information direction, hence the pin writes \nThere is a timer driven blinking light just to show that cpu is alive\n\n\nBoth have active RX dma in circular mode with FIFO closed. Both has their own global interrupts for idle activated\n\n\nI have double checked pins and channels. I have tried to crop the code as lean as possible and linked it bellow. The code is for the F411 dev board\n\n\nhttps://pastebin.com/Dk3f0tPZ","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":2,"points":0,"moderationLabels":["links"],"isEdited":true,"sb":false},{"editableUntil":"2019-08-29T15:02:47","dislikes":0,"thread":"5966865871","numReports":0,"likes":3,"message":"\u003cp>You did not do double check :)\u003cbr>See lines 344-347, wrong variables and DMA configuration\u003cbr>I also don't see your interrupts implemented for DMA. Functions are there but no content.\u003cbr>Also function usart_process_data2, you call USART6 and USART2.\u003c/p>\u003cp>Please go through the code again and check part by part. Make sure all DMA config matches your internal memory, etc.\u003c/p>","id":"4587760942","createdAt":"2019-08-22T15:02:47","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4587672871,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"You did not do double check :)\nSee lines 344-347, wrong variables and DMA configuration\nI also don't see your interrupts implemented for DMA. Functions are there but no content.\nAlso function usart_process_data2, you call USART6 and USART2.\n\nPlease go through the code again and check part by part. Make sure all DMA config matches your internal memory, etc.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":3,"points":3,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2019-08-30T13:01:57","dislikes":0,"thread":"5966865871","numReports":0,"likes":4,"message":"\u003cp>I am not sure I understand. The part you are referring to is generated by the STM IDE and since there is no \"user code\" area any change would be reverted back at each new code generation. USART/DMA initialization is actually done by STM IDE and there shouldn't be any human error. Still I have re-checked the various data paths and compared them to data sheet. They seem correct. I  don't particularly need half/full complete interrupts hence I simply ignored them. Am I missing something?\u003c/p>\u003cp>I have also finally solved how to receive data, albeit in IT/LL. The victory seems mute as the initial goal was to record the data in DMA mode.\u003c/p>\u003cp>Shouldn't     LL_DMA_SetMemoryAddress() actually do this? After all it is preset in circular mode. I thought the new part of the code was the idle detection.\u003c/p>\u003cp>As I am new to the platform simple things might look hard to beginners like me.Do you plan  on adopting your code to STM IDE, both to promote the software and to help beginners like me?\u003c/p>","id":"4588867946","createdAt":"2019-08-23T13:01:57","author":{"username":"mikrosay","about":"","name":"mikrosay","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2019-08-22T11:10:20","profileUrl":"https://disqus.com/by/mikrosay/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"336728448","avatar":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/mikrosay.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4587760942,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I am not sure I understand. The part you are referring to is generated by the STM IDE and since there is no \"user code\" area any change would be reverted back at each new code generation. USART/DMA initialization is actually done by STM IDE and there shouldn't be any human error. Still I have re-checked the various data paths and compared them to data sheet. They seem correct. I  don't particularly need half/full complete interrupts hence I simply ignored them. Am I missing something?\n\n\n\nI have also finally solved how to receive data, albeit in IT/LL. The victory seems mute as the initial goal was to record the data in DMA mode.\n\n\nShouldn't     LL_DMA_SetMemoryAddress() actually do this? After all it is preset in circular mode. I thought the new part of the code was the idle detection.\n\n\nAs I am new to the platform simple things might look hard to beginners like me.Do you plan  on adopting your code to STM IDE, both to promote the software and to help beginners like me?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":4,"points":4,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2019-08-30T13:46:40","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>I was referring to your pastebin link. See lines there.\u003c/p>","id":"4588916509","createdAt":"2019-08-23T13:46:40","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4588867946,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I was referring to your pastebin link. See lines there.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":5,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2019-08-26T04:59:39","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>Hello, i would like to ask\u003cbr>I've tried idle_line_irq_L4 example project. it works but if the dma data length reach the size of dma buffer, it stop transmitting the data to usart\u003cbr>how to solve this problem?\u003c/p>","id":"4583457969","createdAt":"2019-08-19T04:59:39","author":{"name":"Indra","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar32.png","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"signedUrl":"","isAnonymous":true},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hello, i would like to ask\nI've tried idle_line_irq_L4 example project. it works but if the dma data length reach the size of dma buffer, it stop transmitting the data to usart\nhow to solve this problem?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":1,"moderationLabels":["anonymous"],"isEdited":false,"sb":false},{"editableUntil":"2019-08-26T05:17:57","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>This cannot be the case. Which STM32L4 did you use? Did you modify some part of code?\u003c/p>","id":"4583466415","createdAt":"2019-08-19T05:17:57","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4583457969,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"This cannot be the case. Which STM32L4 did you use? Did you modify some part of code?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2019-08-26T06:58:13","dislikes":0,"thread":"5966865871","numReports":0,"likes":2,"message":"\u003cp>I use STM32L452CEU .. I modified only DMA channel and USART channel and implemented your code into my project.\u003c/p>","id":"4583510909","createdAt":"2019-08-19T06:58:13","author":{"name":"Indra","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar32.png","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"signedUrl":"","isAnonymous":true},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4583466415,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I use STM32L452CEU .. I modified only DMA channel and USART channel and implemented your code into my project.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":2,"points":2,"moderationLabels":["anonymous"],"isEdited":false,"sb":false},{"editableUntil":"2019-08-26T07:02:41","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Did you also modify interrupt handlers for new DMA channel? Make sure you are also clearing right DMA TC/HT flags in interrupts for DMA.\u003c/p>","id":"4583513054","createdAt":"2019-08-19T07:02:41","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4583510909,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Did you also modify interrupt handlers for new DMA channel? Make sure you are also clearing right DMA TC/HT flags in interrupts for DMA.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":3,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2019-08-26T07:18:26","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Sorry I forget to set the DMA in circular mode lol..\u003cbr>Now it's working fine.\u003cbr>Thank you for the code and your fast response..\u003cbr>cheers..\u003c/p>","id":"4583520472","createdAt":"2019-08-19T07:18:26","author":{"name":"Indra","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar32.png","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"signedUrl":"","isAnonymous":true},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4583513054,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Sorry I forget to set the DMA in circular mode lol..\nNow it's working fine.\nThank you for the code and your fast response..\ncheers..","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":4,"points":0,"moderationLabels":["anonymous"],"isEdited":false,"sb":false},{"editableUntil":"2019-08-03T05:59:34","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>It is actually possible to go the HC/TC/Idle route without the cons that you listed. When interrupts occur we notify a listener and unsubscribe them. On notification the listener copies the data and pushes a processing callback to a task queue. This is very cheap and is the only thing that occurs inside the interrupt. The task queue is then polled and executed in the main loop, once the callback is processed the listener re-subscribes to the interrupts.\u003c/p>","id":"4555288277","createdAt":"2019-07-27T05:59:34","author":{"name":"Veritas","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar32.png","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"signedUrl":"","isAnonymous":true},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"It is actually possible to go the HC/TC/Idle route without the cons that you listed. When interrupts occur we notify a listener and unsubscribe them. On notification the listener copies the data and pushes a processing callback to a task queue. This is very cheap and is the only thing that occurs inside the interrupt. The task queue is then polled and executed in the main loop, once the callback is processed the listener re-subscribes to the interrupts.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":1,"moderationLabels":["anonymous"],"isEdited":false,"sb":false},{"editableUntil":"2019-08-03T06:31:25","dislikes":0,"thread":"5966865871","numReports":0,"likes":2,"message":"\u003cp>That's exactly what I'm doing in RTOS example code. The only thing I do not understand is this \"listener\". Why do you need any listener? This is interrupt routine already..\u003c/p>","id":"4555301671","createdAt":"2019-07-27T06:31:25","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4555288277,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"That's exactly what I'm doing in RTOS example code. The only thing I do not understand is this \"listener\". Why do you need any listener? This is interrupt routine already..","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":2,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2017-12-07T02:11:16","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>Hi,\u003cbr>I just want to let you know that you should consider adding \"volatile\" keyword to size_t Write, Read; declaration since you are using those variables in interrupt routines.\u003cbr>The code you wrote wasn't working for me till I changed the declaration by adding mentioned \"volatile\".\u003cbr>Anyways, great job man, I would like to be as good embedded programmer as you are someday.\u003cbr>Cheers.\u003c/p>","id":"3639155439","createdAt":"2017-11-30T02:11:16","author":{"username":"dawidkopy","about":"","name":"Dawid Kopy\u015b","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2017-11-29T02:11:39","profileUrl":"https://disqus.com/by/dawidkopy/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"272549690","avatar":{"permalink":"https://disqus.com/api/users/avatars/dawidkopy.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/dawidkopy.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/dawidkopy.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/dawidkopy.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hi,\nI just want to let you know that you should consider adding \"volatile\" keyword to size_t Write, Read; declaration since you are using those variables in interrupt routines.\nThe code you wrote wasn't working for me till I changed the declaration by adding mentioned \"volatile\".\nAnyways, great job man, I would like to be as good embedded programmer as you are someday.\nCheers.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":1,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2017-12-07T05:18:14","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Absolutelly I agree here. It was just to show the concept.\u003c/p>","id":"3639315918","createdAt":"2017-11-30T05:18:14","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3639155439,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Absolutelly I agree here. It was just to show the concept.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2017-09-25T09:40:38","dislikes":0,"thread":"5966865871","numReports":0,"likes":1,"message":"\u003cp>doesn't work with STM321x as the TC flag isn't set when you disable the DMA. Secondly there seems to be an idle int after every TX as well, so that needs trapping out to ensure it doesn't force the rxdma to be aborted.\u003c/p>","id":"3522726411","createdAt":"2017-09-18T09:40:38","author":{"name":"me","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar32.png","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"signedUrl":"","isAnonymous":true},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"doesn't work with STM321x as the TC flag isn't set when you disable the DMA. Secondly there seems to be an idle int after every TX as well, so that needs trapping out to ensure it doesn't force the rxdma to be aborted.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":1,"moderationLabels":["anonymous"],"isEdited":false,"sb":false},{"editableUntil":"2017-12-20T23:31:44","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Seems that I am facing the same problem with not raising the TC interrupt after disabling the DMA at a STM32F107VCT6. Is there any solution known?\u003c/p>\u003cp>TIA\u003c/p>","id":"3661287622","createdAt":"2017-12-13T23:31:44","author":{"username":"matthiaslipinsky","about":"","name":"Matthias Lipinsky","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2016-08-17T13:27:55","profileUrl":"https://disqus.com/by/matthiaslipinsky/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"218841627","avatar":{"permalink":"https://disqus.com/api/users/avatars/matthiaslipinsky.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/matthiaslipinsky.jpg","cache":"https://c.disquscdn.com/uploads/users/21884/1627/avatar200.jpg?1698507903"},"cache":"https://c.disquscdn.com/uploads/users/21884/1627/avatar92.jpg?1698507903","large":{"permalink":"https://disqus.com/api/users/avatars/matthiaslipinsky.jpg","cache":"https://c.disquscdn.com/uploads/users/21884/1627/avatar92.jpg?1698507903"},"small":{"permalink":"https://disqus.com/api/users/avatars/matthiaslipinsky.jpg","cache":"https://c.disquscdn.com/uploads/users/21884/1627/avatar32.jpg?1698507903"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3522726411,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Seems that I am facing the same problem with not raising the TC interrupt after disabling the DMA at a STM32F107VCT6. Is there any solution known?\n\n\nTIA","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2017-12-21T05:15:15","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>\u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fcommunity.st.com%2Fthread%2F42689-efficiently-use-dma-with-uart-rx-on-stm32%3AwIZVXVZi5_y5iSAuRcDwD4NZu1Y&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"https://community.st.com/thread/42689-efficiently-use-dma-with-uart-rx-on-stm32\">https://community.st.com/th...\u003c/a>\u003c/p>","id":"3661666595","createdAt":"2017-12-14T05:15:15","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3661287622,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"https://community.st.com/thread/42689-efficiently-use-dma-with-uart-rx-on-stm32","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":2,"points":0,"moderationLabels":["links"],"isEdited":false,"sb":false},{"editableUntil":"2018-09-20T06:42:36","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>The linked page is no longer working. ST has broke the link, can you update the link please?\u003c/p>","id":"4092745383","createdAt":"2018-09-13T06:42:36","author":{"username":"disqus_6UFdrnI1Hi","about":"","name":"Sandor Marton","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2018-09-13T06:40:15","profileUrl":"https://disqus.com/by/disqus_6UFdrnI1Hi/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"298175678","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_6UFdrnI1Hi.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_6UFdrnI1Hi.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_6UFdrnI1Hi.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_6UFdrnI1Hi.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3661666595,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"The linked page is no longer working. ST has broke the link, can you update the link please?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":3,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2017-12-21T15:01:08","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Thx.\u003cbr>The only new information I found at your link was this:\u003cbr>\"I don't use the 'F1xx.  I looked into RM0008 and - contrary to 'F4xx - there is no mention that the Transfer Complete interrupt should be thrown upon channel disable, so it appears it works as expected and you have to cope with this in your Software\"\u003cbr>So, in the Manual of the used STM32F107VCT6 I could neither find this mention, that this Interrupt is thrown upon disabling. So, that means, that not every STM32 cpu supports that?\u003c/p>","id":"3662142807","createdAt":"2017-12-14T15:01:08","author":{"username":"matthiaslipinsky","about":"","name":"Matthias Lipinsky","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2016-08-17T13:27:55","profileUrl":"https://disqus.com/by/matthiaslipinsky/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"218841627","avatar":{"permalink":"https://disqus.com/api/users/avatars/matthiaslipinsky.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/matthiaslipinsky.jpg","cache":"https://c.disquscdn.com/uploads/users/21884/1627/avatar200.jpg?1698507903"},"cache":"https://c.disquscdn.com/uploads/users/21884/1627/avatar92.jpg?1698507903","large":{"permalink":"https://disqus.com/api/users/avatars/matthiaslipinsky.jpg","cache":"https://c.disquscdn.com/uploads/users/21884/1627/avatar92.jpg?1698507903"},"small":{"permalink":"https://disqus.com/api/users/avatars/matthiaslipinsky.jpg","cache":"https://c.disquscdn.com/uploads/users/21884/1627/avatar32.jpg?1698507903"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3661666595,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thx.\nThe only new information I found at your link was this:\n\"I don't use the 'F1xx.  I looked into RM0008 and - contrary to 'F4xx - there is no mention that the Transfer Complete interrupt should be thrown upon channel disable, so it appears it works as expected and you have to cope with this in your Software\"\nSo, in the Manual of the used STM32F107VCT6 I could neither find this mention, that this Interrupt is thrown upon disabling. So, that means, that not every STM32 cpu supports that?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":3,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2017-12-21T15:08:47","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Actually, I suggest you fully read the comments. The 3rd example is the best one where you disable option for possible race conditions and lost bytes.\u003c/p>","id":"3662154898","createdAt":"2017-12-14T15:08:47","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3662142807,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Actually, I suggest you fully read the comments. The 3rd example is the best one where you disable option for possible race conditions and lost bytes.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":4,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2018-08-07T11:14:33","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Hi! Your STM Community link is currently down. Could you please share that 3rd example here for STM32F1xx devices? Thank you!\u003c/p>","id":"4014638760","createdAt":"2018-07-31T11:14:33","author":{"name":"Attila","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar32.png","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"signedUrl":"","isAnonymous":true},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":3662154898,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hi! Your STM Community link is currently down. Could you please share that 3rd example here for STM32F1xx devices? Thank you!","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":5,"points":0,"moderationLabels":["anonymous"],"isEdited":false,"sb":false},{"editableUntil":"2022-01-27T12:57:08","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Hi Tilen! Thank you for the post, very very useful! I'd like to ask about any ways to check if the DMA circular receive is still alive? My application is waiting for data packets to arrive on the UART channel, using DMA with circular buffer. There is also an interrupt handler for UART errors, to try to detect if enything went wrong on the line and then clear the errors and restart the DMA RX with HAL_UART_Receive_DMA(). However still we see that the UART stops receiving data and we need a restart. I assume there should be a way to detect if the DMA RX stopped on a reason and we could recover. Please advise.\u003c/p>\u003cp>Many thanks!\u003c/p>","id":"5699984871","createdAt":"2022-01-20T12:57:08","author":{"username":"kilenchetvenotkentaur","about":"","name":"Kilenchetvenot Kentaur","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-01-20T12:56:52","profileUrl":"https://disqus.com/by/kilenchetvenotkentaur/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"380723064","avatar":{"permalink":"https://disqus.com/api/users/avatars/kilenchetvenotkentaur.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/kilenchetvenotkentaur.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/kilenchetvenotkentaur.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/kilenchetvenotkentaur.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hi Tilen! Thank you for the post, very very useful! I'd like to ask about any ways to check if the DMA circular receive is still alive? My application is waiting for data packets to arrive on the UART channel, using DMA with circular buffer. There is also an interrupt handler for UART errors, to try to detect if enything went wrong on the line and then clear the errors and restart the DMA RX with HAL_UART_Receive_DMA(). However still we see that the UART stops receiving data and we need a restart. I assume there should be a way to detect if the DMA RX stopped on a reason and we could recover. Please advise.\n\nMany thanks!","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-01-27T13:31:55","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>You can check enable bit in DMA control register and check for any errors in DMA status registers. Then you know if it is working or not (DMA itself). For sure you need to handle UART too, to actually receive character first.\u003c/p>","id":"5700024962","createdAt":"2022-01-20T13:31:55","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5699984871,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"You can check enable bit in DMA control register and check for any errors in DMA status registers. Then you know if it is working or not (DMA itself). For sure you need to handle UART too, to actually receive character first.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2022-01-27T21:58:52","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Thank you, I'll implement these verifications. If there is an error should I simply restart the DMA receive process?\u003c/p>\u003cp>I also checked and looks like DMA channel is still enabled, however the HAL DMA instance is in STATE_BUSY. It may have become stuck on some reason?\u003c/p>\u003cp>Registers (all in binary):\u003cbr>CCR: 10101111\u003cbr>CNDTR: 11\u003cbr>CPAR: 1000000000000000100110000100100\u003cbr>CMAR: 100000000000000001001011101000\u003cbr>ISR: 0 all, no transfer error detected.\u003c/p>\u003cp>Device is an STM32F439 Nucleo 144.\u003c/p>","id":"5700749971","createdAt":"2022-01-20T21:58:52","author":{"username":"kilenchetvenotkentaur","about":"","name":"Kilenchetvenot Kentaur","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2022-01-20T12:56:52","profileUrl":"https://disqus.com/by/kilenchetvenotkentaur/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"380723064","avatar":{"permalink":"https://disqus.com/api/users/avatars/kilenchetvenotkentaur.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/kilenchetvenotkentaur.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/kilenchetvenotkentaur.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/kilenchetvenotkentaur.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5700024962,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Thank you, I'll implement these verifications. If there is an error should I simply restart the DMA receive process?\n\nI also checked and looks like DMA channel is still enabled, however the HAL DMA instance is in STATE_BUSY. It may have become stuck on some reason?\n\nRegisters (all in binary):\nCCR: 10101111\nCNDTR: 11\nCPAR: 1000000000000000100110000100100\nCMAR: 100000000000000001001011101000\nISR: 0 all, no transfer error detected.\n\nDevice is an STM32F439 Nucleo 144.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":2,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2021-05-04T19:09:41","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>We can use osSignals in CMSIS-RTOS mode instead of empty osmessagequeues\u003c/p>","id":"5362081213","createdAt":"2021-04-27T19:09:41","author":{"username":"lhamikvrak","about":"","name":"\u0130lhami K\u0131vrak","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-08-12T09:35:25","profileUrl":"https://disqus.com/by/lhamikvrak/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"117884570","avatar":{"permalink":"https://disqus.com/api/users/avatars/lhamikvrak.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/lhamikvrak.jpg","cache":"https://c.disquscdn.com/uploads/users/11788/4570/avatar128.jpg?1619550582"},"cache":"https://c.disquscdn.com/uploads/users/11788/4570/avatar92.jpg?1619550582","large":{"permalink":"https://disqus.com/api/users/avatars/lhamikvrak.jpg","cache":"https://c.disquscdn.com/uploads/users/11788/4570/avatar92.jpg?1619550582"},"small":{"permalink":"https://disqus.com/api/users/avatars/lhamikvrak.jpg","cache":"https://c.disquscdn.com/uploads/users/11788/4570/avatar32.jpg?1619550582"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"We can use osSignals in CMSIS-RTOS mode instead of empty osmessagequeues","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-05-04T21:04:43","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>For cmsis-os yes. But not for the other oses. Plus then you need to wait for different signals to handle all cases.\u003c/p>","id":"5362216028","createdAt":"2021-04-27T21:04:43","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":5362081213,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"For cmsis-os yes. But not for the other oses. Plus then you need to wait for different signals to handle all cases.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2021-01-25T16:11:52","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Hello Mr. Tilen!!\u003cbr>Is it possible to use your code with the stm32f303k8?\u003c/p>\u003cp>Thank youy\u003c/p>","id":"5232063117","createdAt":"2021-01-18T16:11:52","author":{"username":"disqus_3sDeB1tidp","about":"","name":"Miguel Aguilar","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2021-01-18T16:09:42","profileUrl":"https://disqus.com/by/disqus_3sDeB1tidp/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"363108799","avatar":{"permalink":"https://disqus.com/api/users/avatars/disqus_3sDeB1tidp.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/disqus_3sDeB1tidp.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/disqus_3sDeB1tidp.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/disqus_3sDeB1tidp.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hello Mr. Tilen!!\nIs it possible to use your code with the stm32f303k8?\n\nThank youy","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-05-13T13:08:35","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>I'm extremely close to getting my version of this code working except that DMA just doesn't appear to be acting for me.\u003c/p>\u003cp>I can see Tx data leaving USART1 of my STM32F4 at 115,200 bits/s, I can see Rx data coming back from the device at the other end at the same data rate and, if I enable the USART1 \u003ccode>RXNE\u003c/code> interrupt flag and put a break-point in the USART1 interrupt I can see that USART1's \u003ccode>DR\u003c/code> contains those received characters, so the USART is fine.  I have, as far as I can tell, made all the same DMA configuration calls that you have here for USART1 using DMA2, stream 2, channel 4 (from table 43 of RM0090).\u003c/p>\u003cp>However, when I call \u003ccode>LL_DMA_GetDataLength()\u003c/code> for DMA2/stream 2 in \u003ccode>USART1_IRQHandler\u003c/code> with only the USART IDLE interrupt flag enabled, or do the same in the \u003ccode>DMA2_Stream2_IRQHandler\u003c/code> with the DMA \u003ccode>HT\u003c/code> and \u003ccode>TC\u003c/code> interrupt flags enabled, and break-point there to examine the return value (or put an assert in there that the return value is equal to my buffer length), the function always returns my buffer length (1024), never any thing else; the assert never fails, nothing has been transferred by the DMA.  The \u003ccode>DMA2_Stream2\u003c/code> registers seem to have sensible contents and DMA2's \u003ccode>LISR\u003c/code> and \u003ccode>HISR\u003c/code> registers are always zero.\u003c/p>\u003cp>\u003ccode>DMA2_Stream2\tDMA_Stream_TypeDef *\t0x40026440\u003cbr>    CR    volatile uint32_t    0x51d\u003cbr>    NDTR  volatile uint32_t\t1024\u003cbr>    PAR   volatile uint32_t\t0x40011004\u003cbr>    M0AR  volatile uint32_t\t0x200064c0\u003cbr>    M1AR  volatile uint32_t\t0\u003cbr>    FCR  volatile uint32_t\t0x21\u003cbr>DMA2        DMA_TypeDef *\t0x40026400\u003cbr>    LISR  volatile uint32_t\t0x0\u003cbr>    HISR  volatile uint32_t\t0x0\u003cbr>    LIFCR  volatile uint32_t\t0x0\u003cbr>    HIFCR  volatile uint32_t\t0x0\u003cbr>\u003c/code>\u003c/p>\u003cp>In fact, if I display the contents of the USART1 registers at the same time, \u003ccode>SR\u003c/code> shows that the \u003ccode>RXNE\u003c/code> flag has been set and the \u003ccode>DR\u003c/code> register shows the last character I know USART1 received (\u003ccode>\\n\u003c/code>).\u003c/p>\u003cp>\u003ccode>USART1\tUSART_TypeDef *\t0x40011000\u003cbr>\tSR\tvolatile uint32_t\t0x3f0\u003cbr>\tDR\tvolatile uint32_t\t0xa\u003cbr>\tBRR\tvolatile uint32_t\t364\u003cbr>\tCR1\tvolatile uint32_t\t0x201c\u003cbr>\tCR2\tvolatile uint32_t\t0x0\u003cbr>\tCR3\tvolatile uint32_t\t0x340\u003cbr>\tGTPR\tvolatile uint32_t\t0x0\u003cbr>\u003c/code>\u003c/p>\u003cp>Aside from checking, double-checking and triple-checking that I am making all the same calls as you with all the correct parameters to configure my DMA for DMA2/stream 2/channel 4, are there any other debug steps I might take to find the cause of my problem?\u003c/p>\u003cp>The code can be found \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fu-blox%2Fcellular%2Fblob%2Fstm32f4_port%2Fport%2Fplatform%2Fstm%2Fstm32f4%2Fsrc%2Fcellular_port_uart.c%23L692%3ATrgFRlImitmrIAgNrulnIU8YoLM&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"https://github.com/u-blox/cellular/blob/stm32f4_port/port/platform/stm/stm32f4/src/cellular_port_uart.c#L692\">here\u003c/a> with the important header file \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fu-blox%2Fcellular%2Fblob%2Fstm32f4_port%2Fport%2Fplatform%2Fstm%2Fstm32f4%2Fcfg%2Fcellular_cfg_hw_platform_specific.h%3Ad8B1Jnhv8466OHI6cF59CEblChI&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"https://github.com/u-blox/cellular/blob/stm32f4_port/port/platform/stm/stm32f4/cfg/cellular_cfg_hw_platform_specific.h\">here\u003c/a>; it is heavily parameterised but I've also hard coded the values and checked and checked...  I'll check again.\u003c/p>","id":"4903256159","createdAt":"2020-05-06T13:08:35","author":{"username":"rob_meades","about":"","name":"Rob Meades","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2016-02-25T11:30:09","profileUrl":"https://disqus.com/by/rob_meades/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"198099252","avatar":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar128.jpg?1593175294"},"cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294","large":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294"},"small":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar32.jpg?1593175294"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I'm extremely close to getting my version of this code working except that DMA just doesn't appear to be acting for me.\n\nI can see Tx data leaving USART1 of my STM32F4 at 115,200 bits/s, I can see Rx data coming back from the device at the other end at the same data rate and, if I enable the USART1 \u003ccode>RXNE\u003c/code> interrupt flag and put a break-point in the USART1 interrupt I can see that USART1's \u003ccode>DR\u003c/code> contains those received characters, so the USART is fine.  I have, as far as I can tell, made all the same DMA configuration calls that you have here for USART1 using DMA2, stream 2, channel 4 (from table 43 of RM0090).\n\nHowever, when I call \u003ccode>LL_DMA_GetDataLength()\u003c/code> for DMA2/stream 2 in \u003ccode>USART1_IRQHandler\u003c/code> with only the USART IDLE interrupt flag enabled, or do the same in the \u003ccode>DMA2_Stream2_IRQHandler\u003c/code> with the DMA \u003ccode>HT\u003c/code> and \u003ccode>TC\u003c/code> interrupt flags enabled, and break-point there to examine the return value (or put an assert in there that the return value is equal to my buffer length), the function always returns my buffer length (1024), never any thing else; the assert never fails, nothing has been transferred by the DMA.  The \u003ccode>DMA2_Stream2\u003c/code> registers seem to have sensible contents and DMA2's \u003ccode>LISR\u003c/code> and \u003ccode>HISR\u003c/code> registers are always zero.\n\n\u003ccode>DMA2_Stream2\tDMA_Stream_TypeDef *\t0x40026440\n    CR    volatile uint32_t    0x51d\n    NDTR  volatile uint32_t\t1024\n    PAR   volatile uint32_t\t0x40011004\n    M0AR  volatile uint32_t\t0x200064c0\n    M1AR  volatile uint32_t\t0\n    FCR  volatile uint32_t\t0x21\nDMA2        DMA_TypeDef *\t0x40026400\n    LISR  volatile uint32_t\t0x0\n    HISR  volatile uint32_t\t0x0\n    LIFCR  volatile uint32_t\t0x0\n    HIFCR  volatile uint32_t\t0x0\n\u003c/code>\n\nIn fact, if I display the contents of the USART1 registers at the same time, \u003ccode>SR\u003c/code> shows that the \u003ccode>RXNE\u003c/code> flag has been set and the \u003ccode>DR\u003c/code> register shows the last character I know USART1 received (\u003ccode>\\n\u003c/code>).\n\n\u003ccode>USART1\tUSART_TypeDef *\t0x40011000\n\tSR\tvolatile uint32_t\t0x3f0\n\tDR\tvolatile uint32_t\t0xa\n\tBRR\tvolatile uint32_t\t364\n\tCR1\tvolatile uint32_t\t0x201c\n\tCR2\tvolatile uint32_t\t0x0\n\tCR3\tvolatile uint32_t\t0x340\n\tGTPR\tvolatile uint32_t\t0x0\n\u003c/code>\n\nAside from checking, double-checking and triple-checking that I am making all the same calls as you with all the correct parameters to configure my DMA for DMA2/stream 2/channel 4, are there any other debug steps I might take to find the cause of my problem?\n\nThe code can be found \u003ca href=\"https://github.com/u-blox/cellular/blob/stm32f4_port/port/platform/stm/stm32f4/src/cellular_port_uart.c#L692\">here\u003c/a> with the important header file \u003ca href=\"https://github.com/u-blox/cellular/blob/stm32f4_port/port/platform/stm/stm32f4/cfg/cellular_cfg_hw_platform_specific.h\">here\u003c/a>; it is heavily parameterised but I've also hard coded the values and checked and checked...  I'll check again.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":0,"moderationLabels":["links"],"isEdited":true,"sb":false},{"editableUntil":"2020-05-13T21:07:35","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>When you call EnableStream, does it actually enable it?\u003cbr>Or better to ask, are HT and TC events triggered even? From your message it seems they are, but please confirm this.\u003c/p>","id":"4903864175","createdAt":"2020-05-06T21:07:35","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4903256159,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"When you call EnableStream, does it actually enable it?\nOr better to ask, are HT and TC events triggered even? From your message it seems they are, but please confirm this.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-05-13T22:07:03","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>\u003ca href=\"http://disq.us/url?url=%23%3ANO3CDrWS14R4hWRRS0InrMYHb9Y&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"#\">\u003c/a>Thanks for the very swift response.\u003c/p>\u003cp>If the stream configuration register offset from DMAx is \"0x10 + 0x18 \u00d7 stream number\" then for DMA2 stream 2 I make that DMA2 (0x40026400) + 0x10 + 0x18 * 2 = 0x40026440. The contents of that register before my initialisation function starts was 0 and, after having done all the configuration, just before I enable DMA with a call to \u003ccode>LL_DMA_EnableStream()\u003c/code>, the contents are 0x051c and then after calling \u003ccode>LL_DMA_EnableStream()\u003c/code> they become 0x051d, so bit 0 \u003ccode>EN\u003c/code> is set by that call.\u003c/p>\u003cp>Concerning events \u003ccode>HT\u003c/code> and \u003ccode>TC\u003c/code>, on my board USART1 is wired to a physical thing, a cellular AT modem, which in the current state of play will only responding with \"\\r\\nOK\\r\\n\" to my \"AT\\r\" so I won't get up to enough DMA length for the DMA \u003ccode>HT\u003c/code> or \u003ccode>TC\u003c/code> flags to be hit on a 1024 byte buffer: for now what I'm looking for is the call to \u003ccode>LL_DMA_GetDataLength()\u003c/code> in the USART1 interrupt IDLE event, which definitely does trigger, to tell me that a non-zero number of bytes (6 bytes: \"\\r\\nOK\\r\\n\") have been DMA'ed by the time the USART1 Rx line goes idle.\u003c/p>\u003cp>Just to confirm, I've also looked at the buffer where things are meant to be being DMA'ed to and it shows no sign of the stuff that is coming in, so the DMA has really not done any DMA'ing.\u003c/p>\u003cp>I must have got a step wrong.  Question is, which one?\u003c/p>\u003cp>Or is this a timing thing: when does \u003ccode>NDTR\u003c/code> get updated?\u003c/p>","id":"4903931192","createdAt":"2020-05-06T22:07:03","author":{"username":"rob_meades","about":"","name":"Rob Meades","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2016-02-25T11:30:09","profileUrl":"https://disqus.com/by/rob_meades/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"198099252","avatar":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar128.jpg?1593175294"},"cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294","large":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294"},"small":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar32.jpg?1593175294"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4903864175,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"\u003ca href=\"#\">\u003c/a>Thanks for the very swift response.\n\nIf the stream configuration register offset from DMAx is \"0x10 + 0x18 \u00d7 stream number\" then for DMA2 stream 2 I make that DMA2 (0x40026400) + 0x10 + 0x18 * 2 = 0x40026440. The contents of that register before my initialisation function starts was 0 and, after having done all the configuration, just before I enable DMA with a call to \u003ccode>LL_DMA_EnableStream()\u003c/code>, the contents are 0x051c and then after calling \u003ccode>LL_DMA_EnableStream()\u003c/code> they become 0x051d, so bit 0 \u003ccode>EN\u003c/code> is set by that call.\n\nConcerning events \u003ccode>HT\u003c/code> and \u003ccode>TC\u003c/code>, on my board USART1 is wired to a physical thing, a cellular AT modem, which in the current state of play will only responding with \"\\r\\nOK\\r\\n\" to my \"AT\\r\" so I won't get up to enough DMA length for the DMA \u003ccode>HT\u003c/code> or \u003ccode>TC\u003c/code> flags to be hit on a 1024 byte buffer: for now what I'm looking for is the call to \u003ccode>LL_DMA_GetDataLength()\u003c/code> in the USART1 interrupt IDLE event, which definitely does trigger, to tell me that a non-zero number of bytes (6 bytes: \"\\r\\nOK\\r\\n\") have been DMA'ed by the time the USART1 Rx line goes idle.\n\nJust to confirm, I've also looked at the buffer where things are meant to be being DMA'ed to and it shows no sign of the stuff that is coming in, so the DMA has really not done any DMA'ing.\n\nI must have got a step wrong.  Question is, which one?\n\nOr is this a timing thing: when does \u003ccode>NDTR\u003c/code> get updated?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":2,"points":0,"moderationLabels":["links"],"isEdited":true,"sb":false},{"editableUntil":"2020-05-14T05:49:08","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>I am 99.9% sure I found the issue. Channel selection of DMA stream is in the upper 16-bits area and in your case it is zero, since your value is 0x051D, while is should be something like 0x0XXXyyyy.\u003c/p>\u003cp>I also see the reason for this. Your header configuration uses 0-7 numbers for channel (#define CELLULAR_CFG_UART1_DMA_CHANNEL             4), while LL function that sets DMA channel expects value that is LL_DMA_CHANNEL_4. This macro is defined in stm32f4xx_ll_dma.h and is not set to 4, but rather to actual bit position.\u003c/p>\u003cp>I would advise you to modify your header and rely only on LL things:\u003c/p>\u003cp>#define CELLULAR_CFG_UART1_DMA_ENGINE              DMA2\u003cbr>#define CELLULAR_CFG_UART1_DMA_STREAM             LL_DMA_STREAM_2\u003cbr>#define CELLULAR_CFG_UART1_DMA_CHANNEL             LL_DMA_CHANNEL_4\u003c/p>\u003cp>Of course you have to modify source code accordingly as now DMA2 is actual memory address and not anymore value 1 or 2 as it was before. Or you can start with channel only and you will see how it goes.\u003c/p>\u003cp>A tip: Always read what are allowed input parameters for specific LL function :)\u003cbr>Let me know if it works.\u003c/p>","id":"4904310052","createdAt":"2020-05-07T05:49:08","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4903931192,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"I am 99.9% sure I found the issue. Channel selection of DMA stream is in the upper 16-bits area and in your case it is zero, since your value is 0x051D, while is should be something like 0x0XXXyyyy.\n\nI also see the reason for this. Your header configuration uses 0-7 numbers for channel (#define CELLULAR_CFG_UART1_DMA_CHANNEL             4), while LL function that sets DMA channel expects value that is LL_DMA_CHANNEL_4. This macro is defined in stm32f4xx_ll_dma.h and is not set to 4, but rather to actual bit position.\n\nI would advise you to modify your header and rely only on LL things:\n\n#define CELLULAR_CFG_UART1_DMA_ENGINE              DMA2\n#define CELLULAR_CFG_UART1_DMA_STREAM             LL_DMA_STREAM_2\n#define CELLULAR_CFG_UART1_DMA_CHANNEL             LL_DMA_CHANNEL_4\n\nOf course you have to modify source code accordingly as now DMA2 is actual memory address and not anymore value 1 or 2 as it was before. Or you can start with channel only and you will see how it goes.\n\nA tip: Always read what are allowed input parameters for specific LL function :)\nLet me know if it works.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":3,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2020-05-14T07:53:34","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>You did it again!!  My hero :-).  Yes, that was absolutely the problem, I'd not dug deep enough to find that \"bit-map not number\" instruction.  I generally avoid dragging platform headers up into my more generic headers wherever I can; instead I have just added another const look-up table of channel number to \u003ccode>LL_DMA_CHANNEL_x\u003c/code> and now my transmission of \"AT\" receives \"OK\" back!  Lots of other bugs to find now but I'm over the DMA hump.  They need to get you solving the problem of world hunger, you're wasted here :-).\u003c/p>\u003cp>Many thanks again.\u003c/p>","id":"4904373985","createdAt":"2020-05-07T07:53:34","author":{"username":"rob_meades","about":"","name":"Rob Meades","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2016-02-25T11:30:09","profileUrl":"https://disqus.com/by/rob_meades/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"198099252","avatar":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar128.jpg?1593175294"},"cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294","large":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294"},"small":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar32.jpg?1593175294"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4904310052,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"You did it again!!  My hero :-).  Yes, that was absolutely the problem, I'd not dug deep enough to find that \"bit-map not number\" instruction.  I generally avoid dragging platform headers up into my more generic headers wherever I can; instead I have just added another const look-up table of channel number to \u003ccode>LL_DMA_CHANNEL_x\u003c/code> and now my transmission of \"AT\" receives \"OK\" back!  Lots of other bugs to find now but I'm over the DMA hump.  They need to get you solving the problem of world hunger, you're wasted here :-).\n\nMany thanks again.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":4,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-05-05T11:28:54","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>First I'd like to congratulate you on a most excellent article; I'm currently porting code to multiple chipsets (ESP32, NRF52840 and now STM32F4) and this is without doubt the clearest and most SW engineer friendly article, and probably whole site, that I've seen so far.  Why don't ST themselves have something like this?  Maybe they don't need it...\u003c/p>\u003cp>Anyway, to the question: my UART driver needs to initalise, deinitialise and then reinitialise cleanly.  However, my version of your code above throws an unexpected interrupt when I call \u003ccode>NVIC_EnableIRQ()\u003c/code> (line #381 of the \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fpastebin.com%2FixGKgwuT%3ANgpjnU4NnIulREUa0nhE0K--_j4&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"https://pastebin.com/ixGKgwuT\">pastebin\u003c/a>) coming back around in init() again so clearly I'm not deinitialising properly.\u003c/p>\u003cp>The complete code can be found \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fpastebin.com%2FixGKgwuT%3ANgpjnU4NnIulREUa0nhE0K--_j4&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"https://pastebin.com/ixGKgwuT\">in the pastebin\u003c/a> but basically in the deinit() function (line #448 of the \u003ca href=\"https://disq.us/url?url=https%3A%2F%2Fpastebin.com%2FixGKgwuT%3ANgpjnU4NnIulREUa0nhE0K--_j4&amp;cuid=3099287\" rel=\"nofollow noopener\" title=\"https://pastebin.com/ixGKgwuT\">pastebin\u003c/a>) I'm:\u003c/p>\u003cp>- disabling the DMA interrupt,\u003cbr>- disabling the USART interrupt,\u003cbr>- disabling the DMA stream,\u003cbr>- disabling the USART,\u003cbr>- deinitialising the USART.\u003c/p>\u003cp>And I also clear pending interrupts before I enable them in the init() function, just in case.  Can you see anything obvious that I'm doing wrong?  To be clear, no interrupts should have been triggered, nothing is happening, this is only init()/deinit() in a cycle.   Oh and this is an STM32F437VG and I'm using USART 1, DMA 1, DMA stream 0, DMA channel 0, pins PA_9, PA_10, PA_11 and PA_12.\u003c/p>","id":"4892962471","createdAt":"2020-04-28T11:28:54","author":{"username":"rob_meades","about":"","name":"Rob Meades","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2016-02-25T11:30:09","profileUrl":"https://disqus.com/by/rob_meades/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"198099252","avatar":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar128.jpg?1593175294"},"cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294","large":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294"},"small":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar32.jpg?1593175294"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"First I'd like to congratulate you on a most excellent article; I'm currently porting code to multiple chipsets (ESP32, NRF52840 and now STM32F4) and this is without doubt the clearest and most SW engineer friendly article, and probably whole site, that I've seen so far.  Why don't ST themselves have something like this?  Maybe they don't need it...\n\nAnyway, to the question: my UART driver needs to initalise, deinitialise and then reinitialise cleanly.  However, my version of your code above throws an unexpected interrupt when I call \u003ccode>NVIC_EnableIRQ()\u003c/code> (line #381 of the \u003ca href=\"https://pastebin.com/ixGKgwuT\">pastebin\u003c/a>) coming back around in init() again so clearly I'm not deinitialising properly.\n\nThe complete code can be found \u003ca href=\"https://pastebin.com/ixGKgwuT\">in the pastebin\u003c/a> but basically in the deinit() function (line #448 of the \u003ca href=\"https://pastebin.com/ixGKgwuT\">pastebin\u003c/a>) I'm:\n\n- disabling the DMA interrupt,\n- disabling the USART interrupt,\n- disabling the DMA stream,\n- disabling the USART,\n- deinitialising the USART.\n\nAnd I also clear pending interrupts before I enable them in the init() function, just in case.  Can you see anything obvious that I'm doing wrong?  To be clear, no interrupts should have been triggered, nothing is happening, this is only init()/deinit() in a cycle.   Oh and this is an STM32F437VG and I'm using USART 1, DMA 1, DMA stream 0, DMA channel 0, pins PA_9, PA_10, PA_11 and PA_12.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":0,"moderationLabels":["links"],"isEdited":true,"sb":false},{"editableUntil":"2020-05-05T12:03:36","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Hi Rob, the easiest way to reset peripheral 100% is by setting its registers to default state. In the code I can see that you are clearing the NVIC pending bit, but not DMA pending interrupt bit. You have to clear all DMA flags before starting the transfer (or enabling it).\u003c/p>\u003cp>You can completely reset peripheral by writing 1 to relevang RCC reset enable registers and then clearing it afterwards, but since single DMA instance may be used for multiple peripherals, this may not be the best idea, since it will reset all transfers. So as a conclusion, I see that you are missing clear of DMA status and interrupt registers for this particular stream.\u003c/p>","id":"4892991122","createdAt":"2020-04-28T12:03:36","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4892962471,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hi Rob, the easiest way to reset peripheral 100% is by setting its registers to default state. In the code I can see that you are clearing the NVIC pending bit, but not DMA pending interrupt bit. You have to clear all DMA flags before starting the transfer (or enabling it).\n\nYou can completely reset peripheral by writing 1 to relevang RCC reset enable registers and then clearing it afterwards, but since single DMA instance may be used for multiple peripherals, this may not be the best idea, since it will reset all transfers. So as a conclusion, I see that you are missing clear of DMA status and interrupt registers for this particular stream.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2020-05-05T13:37:00","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Many thanks for the swift response.  I've added calls to ALL of the \u003ccode>LL_DMA_ClearFlag_xxx()\u003c/code> functions for my DMA stream, even for the ones I hadn't enabled, and that has done the trick.  Perfection!  My thanks again, you are doing an excellent job here.\u003c/p>","id":"4893087288","createdAt":"2020-04-28T13:37:00","author":{"username":"rob_meades","about":"","name":"Rob Meades","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2016-02-25T11:30:09","profileUrl":"https://disqus.com/by/rob_meades/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"198099252","avatar":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar128.jpg?1593175294"},"cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294","large":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar92.jpg?1593175294"},"small":{"permalink":"https://disqus.com/api/users/avatars/rob_meades.jpg","cache":"https://c.disquscdn.com/uploads/users/19809/9252/avatar32.jpg?1593175294"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4892991122,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Many thanks for the swift response.  I've added calls to ALL of the \u003ccode>LL_DMA_ClearFlag_xxx()\u003c/code> functions for my DMA stream, even for the ones I hadn't enabled, and that has done the trick.  Perfection!  My thanks again, you are doing an excellent job here.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":2,"points":0,"moderationLabels":[],"isEdited":true,"sb":false},{"editableUntil":"2019-12-07T08:48:57","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Hi,\u003cbr>I am using USART1 with IRQ interrupt every thing is working as expected but when i receive a large file(2KB) i am not able to store the data .\u003cbr>I am trying to store the the received file to SD card using SDIO ,Is there any way to receive  data without any data loss ,if yes kindly provide the details to implement the same .(STM32F446RE)\u003c/p>\u003cp>&lt;static void=\"\" usart1_config(void)=\"\" {=\"\" usart_inittypedef=\"\" usart_initstructure;=\"\" nvic_inittypedef=\"\" nvic_initstructure;=\"\" gpio_inittypedef=\"\" gpio_initstructure;=\"\" *=\"\" enable=\"\" gpio=\"\" clock=\"\" *=\"\" rcc_ahb1periphclockcmd(usart1_tx_gpio_clk=\"\" |=\"\" usart1_rx_gpio_clk,=\"\" enable);=\"\" *=\"\" enable=\"\" usart=\"\" clock=\"\" *=\"\" usart1_clk_init(usart1_clk,=\"\" enable);=\"\" *=\"\" connect=\"\" usart=\"\" pins=\"\" to=\"\" af7=\"\" *=\"\" gpio_pinafconfig(usart1_tx_gpio_port,=\"\" usart1_tx_source,=\"\" usart1_tx_af);=\"\" gpio_pinafconfig(usart1_rx_gpio_port,=\"\" usart1_rx_source,=\"\" usart1_rx_af);=\"\" *=\"\" configure=\"\" usart=\"\" tx=\"\" and=\"\" rx=\"\" as=\"\" alternate=\"\" function=\"\" push-pull=\"\" *=\"\" gpio_initstructure.gpio_mode=\"GPIO_Mode_AF;\" gpio_initstructure.gpio_speed=\"GPIO_Speed_100MHz;\" gpio_initstructure.gpio_otype=\"GPIO_OType_PP;\" gpio_initstructure.gpio_pupd=\"GPIO_PuPd_UP;\" gpio_initstructure.gpio_pin=\"USART1_TX_PIN;\" gpio_init(usart1_tx_gpio_port,=\"\" &amp;gpio_initstructure);=\"\" gpio_initstructure.gpio_pin=\"USART1_RX_PIN;\" gpio_init(usart1_rx_gpio_port,=\"\" &amp;gpio_initstructure);=\"\" *=\"\" enable=\"\" the=\"\" usart=\"\" oversampling=\"\" by=\"\" 8=\"\" *=\"\" usart_oversampling8cmd(usart1,=\"\" enable);=\"\" usart_initstructure.usart_baudrate=\"115200;\" usart_initstructure.usart_wordlength=\"USART_WordLength_8b;\" usart_initstructure.usart_stopbits=\"USART_StopBits_1;\" usart_initstructure.usart_parity=\"USART_Parity_No;\" usart_initstructure.usart_hardwareflowcontrol=\"USART_HardwareFlowControl_None;\" usart_initstructure.usart_mode=\"USART_Mode_Rx\" |=\"\" usart_mode_tx;=\"\" usart_init(usart1,=\"\" &amp;usart_initstructure);=\"\" nvic_prioritygroupconfig(nvic_prioritygroup_2);=\"\" *=\"\" enable=\"\" the=\"\" usartx=\"\" interrupt=\"\" *=\"\" nvic_initstructure.nvic_irqchannel=\"USART1_IRQn;\" nvic_initstructure.nvic_irqchannelpreemptionpriority=\"0;\" nvic_initstructure.nvic_irqchannelsubpriority=\"0;\" nvic_initstructure.nvic_irqchannelcmd=\"ENABLE;\" nvic_init(&amp;nvic_initstructure);=\"\" usart_itconfig(usart3,=\"\" usart_it_txe,=\"\" enable);=\"\" usart_itconfig(usart1,=\"\" usart_it_rxne,=\"\" enable);=\"\" *=\"\" enable=\"\" usart=\"\" *=\"\" usart_cmd(usart1,=\"\" enable);=\"\"&gt;&lt;/void&gt;\u003c/p>","id":"4707185100","createdAt":"2019-11-30T08:48:57","author":{"name":"Nitin U","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar32.png","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"signedUrl":"","isAnonymous":true},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hi,\nI am using USART1 with IRQ interrupt every thing is working as expected but when i receive a large file(2KB) i am not able to store the data .\nI am trying to store the the received file to SD card using SDIO ,Is there any way to receive  data without any data loss ,if yes kindly provide the details to implement the same .(STM32F446RE)\n\n\n\n\n\u003cstatic void USART1_Config(void)\n{\n  USART_InitTypeDef USART_InitStructure;\n  NVIC_InitTypeDef NVIC_InitStructure;\n  GPIO_InitTypeDef GPIO_InitStructure;\n\n  /* Enable GPIO clock */\n  RCC_AHB1PeriphClockCmd(USART1_TX_GPIO_CLK | USART1_RX_GPIO_CLK, ENABLE);\n\n  /* Enable USART clock */\n  USART1_CLK_INIT(USART1_CLK, ENABLE);\n\n  /* Connect USART pins to AF7 */\n  GPIO_PinAFConfig(USART1_TX_GPIO_PORT, USART1_TX_SOURCE, USART1_TX_AF);\n  GPIO_PinAFConfig(USART1_RX_GPIO_PORT, USART1_RX_SOURCE, USART1_RX_AF);\n\n  /* Configure USART Tx and Rx as alternate function push-pull */\n  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;\n  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;\n  GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;\n  GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;\n  GPIO_InitStructure.GPIO_Pin = USART1_TX_PIN;\n  GPIO_Init(USART1_TX_GPIO_PORT, &GPIO_InitStructure);\n\n  GPIO_InitStructure.GPIO_Pin = USART1_RX_PIN;\n  GPIO_Init(USART1_RX_GPIO_PORT, &GPIO_InitStructure);\n\n  /* Enable the USART OverSampling by 8 */\n  USART_OverSampling8Cmd(USART1, ENABLE);\n\n  USART_InitStructure.USART_BaudRate = 115200;\n  USART_InitStructure.USART_WordLength = USART_WordLength_8b;\n  USART_InitStructure.USART_StopBits = USART_StopBits_1;\n  USART_InitStructure.USART_Parity = USART_Parity_No;\n  USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;\n  USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;\n  USART_Init(USART1, &USART_InitStructure);\n\n  \n  NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);\n\n  /* Enable the USARTx Interrupt */\n  NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;\n  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;\n  NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;\n  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;\n  NVIC_Init(&NVIC_InitStructure);\n\n//  USART_ITConfig(USART3, USART_IT_TXE, ENABLE);\n  USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);\n  /* Enable USART */\n  USART_Cmd(USART1, ENABLE);>\u003c/void USART1_IRQHandler(void)\n{\n\n\t__disable_irq();\n    /* RXNE handler */\nif(USART_GetITStatus(USART3, USART_IT_RXNE) != RESET)\n    {\nswitch ((char)USART_ReceiveData(USART3))\n\t\t{\n    if(USART_GetITStatus(USART1, USART_IT_RXNE) != RESET)\n    {\n        if((char)USART_ReceiveData(USART1) == '\\r')\n\t\t{\n\tstrcpy(UC_process_byte,UC_received_byte);\n        UC_recv_finished = true;\n        memset(UC_received_byte,0,sizeof(UC_received_byte));\n}\ndefault:UC_received_byte[UC_receive_count++]=(char)USART_ReceiveData(USART3);\n\t\t\tbreak;\n\t\t}\n\t\tUSART_ClearITPendingBit(USART3, USART_IT_RXNE);\n\t}\n __enable_irq();\n}>","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":0,"moderationLabels":["anonymous"],"isEdited":false,"sb":false},{"editableUntil":"2019-08-28T14:50:26","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Hi .. I am receiving continuous data from sensor to STM32F7 microcontroller. I am trying to read it through Circular DMA using HAL_UART_Receive_DMA() function.The received data is not synchronized and is randomly received. I need to make sure no data is getting lost and the receved data is synchronized.Is there any way to do it. I am sorry i am new to this.?\u003c/p>","id":"4586467424","createdAt":"2019-08-21T14:50:26","author":{"username":"balajek","about":"","name":"BALA","disable3rdPartyTrackers":true,"isPowerContributor":false,"joinedAt":"2019-08-21T14:49:36","profileUrl":"https://disqus.com/by/balajek/","url":"","location":"","isPrivate":false,"signedUrl":"","isPrimary":true,"isAnonymous":false,"id":"336687785","avatar":{"permalink":"https://disqus.com/api/users/avatars/balajek.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/balajek.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar128.png"},"cache":"//a.disquscdn.com/1713533786/images/noavatar92.png","large":{"permalink":"https://disqus.com/api/users/avatars/balajek.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"small":{"permalink":"https://disqus.com/api/users/avatars/balajek.jpg","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"isCustom":false}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Hi .. I am receiving continuous data from sensor to STM32F7 microcontroller. I am trying to read it through Circular DMA using HAL_UART_Receive_DMA() function.The received data is not synchronized and is randomly received. I need to make sure no data is getting lost and the receved data is synchronized.Is there any way to do it. I am sorry i am new to this.?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":0,"moderationLabels":[],"isEdited":false,"sb":false},{"editableUntil":"2019-01-10T03:31:43","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>Is this possible on F072RB ? I guess it has DMA TX/RX Call back for HT and TC  but no IDLE IT?\u003cbr>also is there alternative functions for \"LL_DAM_GetDataLength\" ?\u003c/p>","id":"4267055274","createdAt":"2019-01-03T03:31:43","author":{"name":"stmnewbie","url":"","profileUrl":"","emailHash":"","avatar":{"small":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar32.png","cache":"//a.disquscdn.com/1713533786/images/noavatar32.png"},"large":{"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"permalink":"//a.disquscdn.com/1713533786/images/noavatar92.png","cache":"//a.disquscdn.com/1713533786/images/noavatar92.png"},"signedUrl":"","isAnonymous":true},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":null,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"Is this possible on F072RB ? I guess it has DMA TX/RX Call back for HT and TC  but no IDLE IT?\nalso is there alternative functions for \"LL_DAM_GetDataLength\" ?","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":0,"points":0,"moderationLabels":["anonymous"],"isEdited":false,"sb":false},{"editableUntil":"2019-01-10T08:49:56","dislikes":0,"thread":"5966865871","numReports":0,"likes":0,"message":"\u003cp>LL_DAM_GetDataLength is not valid function. It is LL_DMA_GetDataLength and it exists in F0 LL drivers.\u003cbr>If there is no IDLE IT, you may consider using Receiver timeout feature. If this is also not available, you may need to implement timer interrupt and check new data in the interrupt.\u003c/p>","id":"4267275009","createdAt":"2019-01-03T08:49:56","author":{"username":"majerletilen","about":"","name":"Majerle Tilen","disable3rdPartyTrackers":false,"isPowerContributor":false,"joinedAt":"2014-07-06T22:02:05","profileUrl":"https://disqus.com/by/majerletilen/","url":"http://majerle.eu","location":"Slovenia","isPrivate":false,"signedUrl":"http://disq.us/?url=http%3A%2F%2Fmajerle.eu&key=41YRUOttVtnqx86AzoAXgg","isPrimary":true,"isAnonymous":false,"id":"113374668","avatar":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","xlarge":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar128.jpg?1556564836"},"cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836","large":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar92.jpg?1556564836"},"small":{"permalink":"https://disqus.com/api/users/avatars/majerletilen.jpg","cache":"https://c.disquscdn.com/uploads/users/11337/4668/avatar32.jpg?1556564836"},"isCustom":true}},"media":[],"isSpam":false,"hasMore":false,"isDeleted":false,"isDeletedByAuthor":false,"parent":4267055274,"isApproved":true,"isNewUserNeedsApproval":false,"isFlagged":false,"raw_message":"LL_DAM_GetDataLength is not valid function. It is LL_DMA_GetDataLength and it exists in F0 LL drivers.\nIf there is no IDLE IT, you may consider using Receiver timeout feature. If this is also not available, you may need to implement timer interrupt and check new data in the interrupt.","isAtFlagLimit":false,"isHighlighted":false,"canVote":false,"forum":"stm32f4discoverycom","depth":1,"points":0,"moderationLabels":[],"isEdited":false,"sb":false}],"thread":{"feed":"https://stm32f4discoverycom.disqus.com/stm32_tutorial_efficiently_receive_uart_data_using_dma/latest.rss","clean_title":"STM32 tutorial: Efficiently receive UART data using DMA","dislikes":0,"likes":9,"message":"","ratingsEnabled":false,"isSpam":false,"isDeleted":false,"category":"3145530","adsDisabled":false,"author":"113374668","id":"5966865871","signedLink":"https://disq.us/?url=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&key=FG-rf2tp8FkJDQettrz1_g","createdAt":"2017-07-05T22:30:08","hasStreaming":false,"raw_message":"","isClosed":false,"link":"https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/","slug":"stm32_tutorial_efficiently_receive_uart_data_using_dma","forum":"stm32f4discoverycom","identifiers":["3015 https://stm32f4-discovery.net/?p=3015"],"posts":62,"moderators":[113374668],"validateAllPosts":false,"title":"STM32 tutorial: Efficiently receive UART data using DMA","highlightedPost":null}},"order":"popular"}</script>


    <div id="fixed-content"></div>

    



    
        
            
<script type="text/json" id="disqus-urls">{
    "root":"//disqus.com",
    "next":"https://c.disquscdn.com/next/current"
}</script>

        
        
        <script>!function () {
            var d = document;
            var toH = d.head.appendChild.bind(d.head);

            var v = window.location.href.match(/[#&?]version=([0-9a-f]{32})/);
            var src = 'https://c.disquscdn.com/next/embed/lounge.load';
            if (v)
                src += '.' + v[1];
            src += '.js';

            var s = d.createElement('script');
            s.crossOrigin = 'anonymous';
            s.id = 'bootstrap-script';
            s.setAttribute('data-app', 'lounge');
            s.src = src;
            toH(s);

            var m = d.createElement('meta');
            m.setAttribute('http-equiv', 'Content-Security-Policy');
            m.setAttribute('content', "script-src https:;");
            toH(m);
        }();</script>
    


<script src="./common.bundle.a59842d31742a609955eb402e17bb0c3.js.download"></script><div id="layout" data-tracking-area="layout"><div id="thread__container"><div><div id="thread__wrapper"><div id="placement-top" data-tracking-area="discovery-north"></div><div id="onboard" data-tracking-area="onboard"><div></div></div><div id="reactions__container"></div><div id="ratings__container"></div><div id="badges-message__container"></div><div id="global-alert"></div><div id="tos__container"></div><header id="main-nav" data-tracking-area="main-nav"><div><nav class="nav nav-primary nav-primary--refresh"><ul><li class="nav-tab nav-tab--primary tab-conversation tab-conversation--refresh active" data-role="post-count"><a class="publisher-nav-color"><span class="comment-count">62 comments</span></a></li><li class="nav-tab nav-tab--primary tab-user"><ul><li class="nav-tab nav-tab--primary notification-menu unread" data-role="notification-menu" style="display: list-item;"><a href="https://disqus.com/home/inbox/" class="notification-container" data-action="home" data-home-path="home/notifications/"><span class="notification-icon notification-icon--refresh icon-comment" aria-hidden="true"></span><span class="notification-count notification-count--refresh" data-role="notification-count">1</span></a></li><li class="nav-tab nav-tab--primary dropdown user-menu" data-role="logout"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="dropdown-toggle dropdown-toggle--refresh" data-toggle="dropdown" role="menuitem" name="Login"><span class="dropdown-toggle-wrapper"><span class="username username--refresh">Login</span> </span> <span class="caret caret--refresh"></span></a><ul class="dropdown-menu dropdown-menu--refresh"><li><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="auth:disqus">Disqus</a></li><li><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="auth:facebook">Facebook</a></li><li><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="auth:twitter">X (Twitter)</a></li><li><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="auth:google">Google</a></li></ul></li></ul></li></ul></nav></div></header><section id="conversation" data-role="main" data-tracking-area="main"><div id="posts"><div id="form" class="textarea-outer-wrapper--top-level"><form class="reply form-refresh form-refresh-v2"><div class="postbox"><div role="alert"></div><div class="ratings-wrapper" data-role="ratings-container"></div><div class="compose-wrapper"><div class="avatar"><span class="user user--refresh"><div>G</div></span></div><div class="textarea-outer-wrapper textarea-outer-wrapper--refresh"><div class="textarea-wrapper" data-role="textarea" dir="auto"><div><span class="placeholder">Join the discussion…</span><div class="textarea" tabindex="0" role="textbox" aria-multiline="true" contenteditable="PLAINTEXT-ONLY" data-role="editable" aria-label="Join the discussion…" style="overflow: auto; overflow-wrap: break-word; max-height: 350px;"><p><br></p></div><div style="display: none;"><ul class="user-mention__list" id="user-mention-list"><li class="header user-mention__header"><h5>in this conversation</h5></li></ul></div></div><div data-role="drag-drop-placeholder" class="media-drag-hover" style="display: none;"><div class="drag-text">⬇ Drag and drop your images here to upload them.</div></div><div class="media-preview empty" data-role="media-preview"><ul data-role="media-progress-list"></ul>
<ul data-role="media-rich-list"></ul>
<div class="media-expanded empty" data-role="media-preview-expanded">
<img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-role="media-preview-expanded-image" alt="Media preview placeholder">
</div>
</div><div class="edit-alert" role="postbox-alert"></div><div class="text-editor-container"><div class="post-actions"><div class="wysiwyg"><div class="gif-picker"><div class="wysiwyg__item" data-role="gif-picker-toggle" title="GIF" aria-label="Open GIF menu" tabindex="0"><div class="wysiwyg__gif" title="GIF" role="img"></div></div><div class="hidden gif-picker__popout-container" data-role="gif-picker-popout-container"></div><div class="new-feature-badge-star" title="New"><div class="wysiwyg__star-badge wysiwyg__star-badge-dims"></div></div></div><div class="media-uploader"><li class="wysiwyg__item" data-role="media-uploader" tabindex="-1"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="attach" class="attach" title="Upload Images" tabindex="0" aria-label="Open file attachment menu">
<div class="wysiwyg__attach wysiwyg__attach-dims" role="img"></div>
</a>
<input type="file" data-role="media-upload" tabindex="-1" accept="image/*">
</li></div><div class="vertical-separator"></div><div data-action="text-editor-buttons"><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="b" tabindex="0" aria-label="Add bold tags to text editor"><div class="wysiwyg__bold" title="Bold" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="i" tabindex="0" aria-label="Add italics tags to text editor"><div class="wysiwyg__italic" title="Italic" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="u" tabindex="0" aria-label="Add underline tags to text editor"><div class="wysiwyg__underline" title="Underline" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="s" tabindex="0" aria-label="Add strikethrough tags to text editor"><div class="wysiwyg__strikethrough" title="Strikethrough" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="a" tabindex="0" aria-label="Add link tags to text editor"><div class="wysiwyg__link" title="Link" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="spoiler" tabindex="0" aria-label="Add spoiler tags to text editor"><div class="wysiwyg__spoiler" title="Spoiler" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="code" tabindex="0" aria-label="Add code tags to text editor"><div class="wysiwyg__code" title="Code" role="img"></div></div><div class="wysiwyg__item" data-action="text-editor-tag" data-tag="blockquote" tabindex="0" aria-label="Add block quote tags to text editor"><div class="wysiwyg__blockquote" title="Quote" role="img"></div></div></div></div><div class="logged-in"><section><div class="temp-post"><button type="submit" class="btn post-action__button full-size-button ">Comment</button><button type="submit" class="btn post-action__button small-size-button hidden">Comment</button></div></section></div></div></div></div></div></div><div data-role="login-form"><div><div><section class="auth-section logged-out__display"><div class="connect"><h6 class="connect__heading">Log in with</h6><ul data-role="login-menu" class="services login-buttons"><li class="auth-disqus"><button type="button" data-action="auth:disqus" title="Disqus" class="connect__button" aria-label="Login with Disqus"><i class="icon-disqus"></i></button></li><li class="auth-facebook"><button type="button" data-action="auth:facebook" title="Facebook" class="connect__button" aria-label="Login with Facebook"><i class="icon-facebook-circle"></i></button></li><li class="auth-twitter"><button type="button" data-action="auth:twitter" title="X (Twitter)" class="connect__button" aria-label="Login with X (Twitter)"><i class="icon-twitter-x"></i></button></li><li class="auth-google"><button type="button" data-action="auth:google" title="Google" class="connect__button" aria-label="Login with Google"><i class="icon-google-plus-circle"></i></button></li></ul></div><div class="guest guest--refresh"><div class="sign-up-wrapper-refresh"><h6 class="guest-form-title guest-form-title--refresh"><span class="register-text"> or sign up with Disqus </span><span class="guest-text"> or pick a name </span></h6> <button type="button" class="help-tooltip__wrapper help-icon" name="guest_tooltip" tabindex="0"><div id="rules" class="help-tooltip__container" data-role="guest-form-tooltip"><div class="tooltip show help-tooltip"><h3 class="help-tooltip__heading">Disqus is a discussion network</h3><ul class="help-tooltip__list"><li><span>Don't be a jerk or do anything illegal. Everything is easier that way.</span></li></ul><p class="clearfix"><a href="https://docs.disqus.com/kb/terms-and-policies/" class="btn btn-small help-tooltip__button" rel="noopener noreferrer" target="_blank">Read full terms and conditions</a></p></div></div></button></div><p class="input-wrapper"><input dir="auto" type="text" placeholder="Name" name="display_name" id="view97_display_name" maxlength="30" class="input--text" aria-label="name"></p><div class="guest-details " data-role="guest-details"><p class="input-wrapper"><input dir="auto" type="email" placeholder="Email" name="email" id="view97_email" class="input--text" aria-label="email"></p><p class="input-wrapper"><input dir="auto" disabled="" type="text" class="register-text input--text" placeholder="Password" name="password" aria-label="password" id="view97_password"></p><p><label><span>Please access our <a href="https://disqus.com/privacy-policy" target="_blank" rel="noopener noreferrer">Privacy Policy</a> to learn what personal data Disqus collects and your choices about how it is used.  All users of our service are also subject to our <a href="https://help.disqus.com/customer/portal/articles/466260-terms-of-service" target="_blank" rel="noopener noreferrer">Terms of Service</a>.</span></label></p><div class="guest-checkbox"><label><input type="checkbox" name="author-guest"> I'd rather post as a guest</label></div><div class="g-recaptcha" data-role="grecaptcha-container"></div><div class="proceed" data-role="submit-btn-container"><div><button type="submit" class="proceed__button btn submit" aria-label="Post"><span class="icon-proceed"></span><div class="spinner"></div></button><button type="submit" class="proceed__button btn next" aria-label="Next"><span class="icon-proceed"></span><div class="spinner"></div></button></div></div></div></div></section></div></div></div></div></form></div><div id="email-signup"></div><div id="secondary-navigation"><div data-tracking-area="secondary-nav" class="nav-secondary-refresh"><ul class="nav-secondary-refresh__list"><li class="nav-secondary-refresh__list-item"><div id="favorite-button"><div class="thread-likes"><div><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="favorite" title="Favorite this discussion" class="favorite-button-toggle favorite-button-toggle--v2 " aria-label="Favorite this discussion"><span class="label label-default"><span class="favorite-icon favorite-icon--refresh-v2 icon-heart-empty"></span></span><span class="label label-favorited"><span class="favorite-icon favorite-icon--refresh-v2 icon-heart"></span></span> <span class="label label-count-refresh label-count-refresh--v2">9</span></a><ul class="dropdown-menu dropdown-menu--coachmark pull-right"><li><div><h2 class="coachmark__heading">Discussion Favorited!</h2><p class="coachmark__description">Favoriting means this is a discussion worth sharing. It gets shared to your followers' Disqus feeds, and gives the creator kudos!</p></div> <a href="https://disqus.com/home/?utm_source=disqus_embed&amp;utm_content=recommend_btn" class="btn btn-primary coachmark__button" target="_blank" rel="noopener noreferrer">Find More Discussions</a></li></ul></div></div></div><div id="thread-share-bar" class="share-bar-refresh"><div class="thread-share-wrapper"><div class="round-delimiter"></div><span data-role="thread-share" class="thread-share-bar-buttons-refresh"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="share-button-toggle share-button-toggle--v2" data-toggle="dropdown" aria-label="Share">Share</a><ul class="share-dropdown-refresh"><li class="share-dropdown-refresh__item"><div class="share-icons-wrapper share-icons-wrapper--twitter" data-action="share:twitter"><span class="icon-twitter-x" aria-hidden="true"></span><span class="visually-hidden">Tweet this discussion</span></div></li><li class="share-dropdown-refresh__item"><div class="share-icons-wrapper share-icons-wrapper--facebook" data-action="share:facebook"><span class="icon-facebook" aria-hidden="true"></span><span class="visually-hidden">Share this discussion on Facebook</span></div></li><li class="share-dropdown-refresh__item"><div class="share-icons-wrapper share-icons-wrapper--email" data-action="share:email"><span class="icon-mail" aria-hidden="true"></span><span class="visually-hidden">Share this discussion via email</span></div></li><li class="share-dropdown-refresh__item"><div class="share-icons-wrapper share-icons-wrapper--link" data-action="copy-link" title="Click to copy discussion link"><span class="icon-link" aria-hidden="true"></span><span class="visually-hidden">Copy link to discussion</span></div></li></ul></span></div></div></li><li data-role="post-sort" class=""><ul class="sort-menu-refresh"><li class="sort-menu-refresh__item selected"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="sort" data-sort="popular">Best</a></li><li class="sort-menu-refresh__item "><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="sort" data-sort="desc">Newest</a></li><li class="sort-menu-refresh__item "><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="sort" data-sort="asc">Oldest</a></li></ul></li></ul></div></div><div id="no-posts" style="display: none;"></div><div id="highlighted-post" data-tracking-area="highlighted" class="highlighted-post" style="display: none;"></div><button class="alert alert--realtime alert--realtime--refresh alert--realtime--refresh-v2" data-role="realtime-notification" style="display: none;"></button><ul id="post-list" class="post-list"><li class="post" id="post-4807305835"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4807305835"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_LwFYV2MDax/" data-action="profile" data-tab="" data-username="disqus_LwFYV2MDax" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="345228748" src="./avatar92.jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_LwFYV2MDax/" data-action="profile" data-tab="" data-username="disqus_LwFYV2MDax" target="_blank" rel="noopener noreferrer">Zitong Zhang</a></span> <a data-action="follow" data-user="345228748" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807305835" data-role="relative-time" class="time-ago" title="Monday, February 24, 2020 9:37 AM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hello Mr. Tilen!</p><p>I found this post extremely useful for configuring UART with DMA. I would like to discuss a situation found by one of our customers and hope you could shed some light on this issue if you have time.<br>We have an STM32F4 device that transmits message through UART from at 115200 baud rate. Our customer is receiving these messages with an STM32 device as well. He uses the IDLE line interrupt to detect end of transmitted message. However, we find "idle frames" in the message before the transmission is complete.<br>I've seen people describing similar issues online but would like to better understand the cause and a better way of detecting end of transmission in this case.</p><p>Many thanks,</p><p>Zitong</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-4" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">4</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4807305835" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/27i58x7" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4807305835"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4807309878"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4807309878"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_LwFYV2MDax/" data-action="profile" data-tab="" data-username="disqus_LwFYV2MDax" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="345228748" src="./avatar92.jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_LwFYV2MDax/" data-action="profile" data-tab="" data-username="disqus_LwFYV2MDax" target="_blank" rel="noopener noreferrer">Zitong Zhang</a></span> <a data-action="follow" data-user="345228748" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807305835" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Zitong Zhang</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807309878" data-role="relative-time" class="time-ago" title="Monday, February 24, 2020 9:47 AM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>After doing some homework, I think there might be two possibilities.<br>1. The DMA arbitrator handling different DMA channels;<br>2. The bus matrix denying the DMA access temporarily;<br>I do not have access to our source code at the moment so I am just making guesses. And I haven't learned microcontrollers formally so please forgive me if I've made any mistakes.<br>Thanks again!<br>Zitong</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4807309878" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/27i5c1i" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4807309878"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4807309878-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4807307638"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4807307638"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_LwFYV2MDax/" data-action="profile" data-tab="" data-username="disqus_LwFYV2MDax" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="345228748" src="./avatar92.jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_LwFYV2MDax/" data-action="profile" data-tab="" data-username="disqus_LwFYV2MDax" target="_blank" rel="noopener noreferrer">Zitong Zhang</a></span> <a data-action="follow" data-user="345228748" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807305835" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Zitong Zhang</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807307638" data-role="relative-time" class="time-ago" title="Monday, February 24, 2020 9:41 AM">4 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p><a href="http://disq.us/url?url=%23%3ANO3CDrWS14R4hWRRS0InrMYHb9Y&amp;cuid=3099287" rel="nofollow noopener" title="#">http://www.chibios.com/forum/viewtopic.php?t=3441#p26203</a><br>barthess commented: "Out custom GNSS receiver produces too much IDLE frames (with exactly 10-bit len) in random<br>places. So I decided to use hardware timeout feature. It works as expected too. Now interrupt<br>comes after the whole message receiving."</p><p><a href="http://disq.us/url?url=%23%3ANO3CDrWS14R4hWRRS0InrMYHb9Y&amp;cuid=3099287" rel="nofollow noopener" title="#">https://ihuifeng.cc/2018/08/15/STM32_UART_IDLE_DMA%E6%8E%A5%E6%94%B6/</a><br>This post is unfortunately Chinese but there are two oscilloscope pictures that are identical to what we've seen. The first one showing the expected behaviour where the yellow pulse occurs after the stream of data. The second picture shows a "premature" IDLE line interrupt due to the idle frames in the message.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4807307638" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/27i5aba" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4807307638"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4807379053"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4807379053"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./avatar92(1).jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807307638" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Zitong Zhang</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807379053" data-role="relative-time" class="time-ago" title="Monday, February 24, 2020 12:15 PM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>This is not the approach you are looking for. IDLE line can be used to detect potential end of message, not to rely only on it. You use IDLE line to understand that something was there, but what exactly was is defined by your protocol. So on IDLE event, you have to check received data and decide if this is end of not. If you are receiving many IDLE events is actually an advantage.</p><p>Imagine what will happen if your receiver sends data to MCU and there is for some reason higher delay than RTO is configured?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4807379053" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/27i6tf1" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4807379053"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4807390009"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4807390009"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_LwFYV2MDax/" data-action="profile" data-tab="" data-username="disqus_LwFYV2MDax" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="345228748" src="./avatar92.jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_LwFYV2MDax/" data-action="profile" data-tab="" data-username="disqus_LwFYV2MDax" target="_blank" rel="noopener noreferrer">Zitong Zhang</a></span> <a data-action="follow" data-user="345228748" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807379053" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807390009" data-role="relative-time" class="time-ago" title="Monday, February 24, 2020 12:36 PM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thank you for the prompt reply, Mr. Tilen!<br>You are right. RTO is arbitrary and we still need to check the integrity of the message. I just think RTO is relatively more predictable than a single IDLE event in this case. Also, as you said, having many IDLE events suggests a more likely end of line but again it shouldn't be the only criteria.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4807390009" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/27i71vd" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4807390009"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4807740352"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4807740352"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./avatar92(1).jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807390009" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Zitong Zhang</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4807740352" data-role="relative-time" class="time-ago" title="Monday, February 24, 2020 6:18 PM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>First thing I would suggest is to take logic analyzer and observe data on RX line (from MCU perspective) to understand timing. If there is one character timeout in between, then it is normal you receive so many idle time interrupts and RTO will help you decreasing frequency of received events. But this is only an indication, you should not, by any means, rely on the fact that RTO means end of line, like you said in your latest comment.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4807740352" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/27iek74" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4807740352"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4807740352-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4807390009-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4807379053-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4807307638-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4807305835-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-3679881364"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3679881364"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/grigoritimonen/" data-action="profile" data-tab="" data-username="grigoritimonen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>G</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/grigoritimonen/" data-action="profile" data-tab="" data-username="grigoritimonen" target="_blank" rel="noopener noreferrer">Grigori Timonen</a></span> <a data-action="follow" data-user="80767278" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3679881364" data-role="relative-time" class="time-ago" title="Wednesday, December 27, 2017 10:32 AM">6 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>This approach doesn't seem to work properly for STM32F1xx.<br>I have a device with both F405 and F107. Disabling a DMA stream in the UART IDLE interrupt handler generates a TC interrupt for DMA on F405 MCU, but doesn't lead to a TC interrupt on F107 MCU. In the idle interrupt handler I can see NDTR register has a proper number of remaining bytes. DMA interrupt is working properly, when I request to transfer only few bytes and send this number of bytes over UART.</p><p> As a workaround we can try to move bytes from DMA buffer to task buffer in the IDLE interrupt handler.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-2" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">2</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3679881364" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1ouwmms" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3679881364"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-3679906360"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3679906360"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./avatar92(1).jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3679881364" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Grigori Timonen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3679906360" data-role="relative-time" class="time-ago" title="Wednesday, December 27, 2017 11:23 AM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>That's true. I've updated the main article on <a href="http://disq.us/url?url=http%3A%2F%2Fcommunity.st.com%3A5F6TJq3SXXpKvJsOCQcVV9rGH-4&amp;cuid=3099287" rel="nofollow noopener" title="community.st.com">community.st.com</a> which I wrote some time ago to give you even better solution for all STM32 families.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3679906360" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1oux5x4" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3679906360"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-3679922890"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3679922890"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/grigoritimonen/" data-action="profile" data-tab="" data-username="grigoritimonen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>G</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/grigoritimonen/" data-action="profile" data-tab="" data-username="grigoritimonen" target="_blank" rel="noopener noreferrer">Grigori Timonen</a></span> <a data-action="follow" data-user="80767278" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3679906360" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3679922890" data-role="relative-time" class="time-ago" title="Wednesday, December 27, 2017 11:53 AM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>In my case I have a system with sleeping tasks. They are executed on demand. I'd like to receive data without any polling. The Idea is to receive data into task buffer and then to set execution pending flag in the task scheduler. This should happen in IRQ handler. Your approach requires a continuous polling which I would like to avoid.<br>I found NDTR register and DMA buffer contain right data already in UART IDLE interrupt call. So I disable DMA, transfer data from DMA buffer to taks buffer, set huart-&gt;RxState to ready instead of busy and call HAL_UART_Receive_DMA() for the next portion of data. This all happens in IDLE interrupt handler. Also I left same old DMA data handling the TC handler. It is supposed to work in case we transfer same amount of data than DMA buffer size.<br>This approach _initially_ seems to work.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3679922890" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1ouxioa" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3679922890"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-3679925619"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3679925619"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./avatar92(1).jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3679922890" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Grigori Timonen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3679925619" data-role="relative-time" class="time-ago" title="Wednesday, December 27, 2017 11:58 AM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>What you have to do is to use DMA in circular mode for start. Then using TC, HT or IDLE interrupts to handle data and copy them to processing queue.</p><p><a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2FMaJerle%2FESP_AT_Lib%2Fblob%2Fmaster%2Fsrc%2Fsystem%2Fesp_ll.c%3ABr5L2IUNeHgD_Sk6V7sth5tqkn8&amp;cuid=3099287" rel="nofollow noopener" title="https://github.com/MaJerle/ESP_AT_Lib/blob/master/src/system/esp_ll.c">https://github.com/MaJerle/...</a> This is the way how I process data at 4.6Mbits from ESP8266.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3679925619" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1ouxks3" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3679925619"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3679925619-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3679922890-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3679906360-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3679881364-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4587526077"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4587526077"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/mikrosay/" data-action="profile" data-tab="" data-username="mikrosay" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>M</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/mikrosay/" data-action="profile" data-tab="" data-username="mikrosay" target="_blank" rel="noopener noreferrer">mikrosay</a></span> <a data-action="follow" data-user="336728448" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4587526077" data-role="relative-time" class="time-ago" title="Thursday, August 22, 2019 1:12 PM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thanks for the code Tilen;<br>I have been using USART_DMA_RX_IDLE_LINE_IRQ_F4 How I simply could not make it work.</p><p>I have adopted the code to STM32F411 Disc board changing required usart/dma handles and pins. However I haven't been able to receive data. Note that data transition using LL-Drivers seems to work fine. Only Receive part seems busted.</p><p>Additionally I have used the STM32F4 Disc board to simply run your code without change. Once again no dice. With a bit of tinkering I again could transmit but failed  to receive.</p><p>I have further tried to write a code with reflection to your in both platforms failing to receive at each part. The same problem is resolved simply using HAL instead of LL, however then your method would not work?</p><p>Note that I have been using STM32 IDE. Any and all help would be welcomed.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4587526077" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23valrx" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4587526077"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4587549160"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4587549160"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./avatar92(1).jpg" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4587526077" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> mikrosay</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4587549160" data-role="relative-time" class="time-ago" title="Thursday, August 22, 2019 1:43 PM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Make sure you have checked that all the DMA stream/channel config is OK, that pins are configured as alternate mode, that interrupt vectors for USART/DMA are correct, that you clear right DMA flags, etc.</p><p>You can post the code here. Remember, pastebin.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4587549160" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23vb3l4" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4587549160"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4587672871"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4587672871"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/mikrosay/" data-action="profile" data-tab="" data-username="mikrosay" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>M</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/mikrosay/" data-action="profile" data-tab="" data-username="mikrosay" target="_blank" rel="noopener noreferrer">mikrosay</a></span> <a data-action="follow" data-user="336728448" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4587549160" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4587672871" data-role="relative-time" class="time-ago" title="Thursday, August 22, 2019 3:48 PM">5 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Basically I have 2 Usart enabled, <br>Usart 2 is usin RS232 architecture and connected to pc via its own TTL. <br>Usart 6 is using RS485 and requires information direction, hence the pin writes <br>There is a timer driven blinking light just to show that cpu is alive</p><p>Both have active RX dma in circular mode with FIFO closed. Both has their own global interrupts for idle activated</p><p>I have double checked pins and channels. I have tried to crop the code as lean as possible and linked it bellow. The code is for the F411 dev board</p><p><a href="https://disq.us/url?url=https%3A%2F%2Fpastebin.com%2FDk3f0tPZ%3AdKL3E-fj5YFN11BnzPXxZEFgIn8&amp;cuid=3099287" rel="nofollow noopener" title="https://pastebin.com/Dk3f0tPZ">https://pastebin.com/Dk3f0tPZ</a></p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4587672871" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23vdr1j" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4587672871"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4587760942"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4587760942"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4587672871" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> mikrosay</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4587760942" data-role="relative-time" class="time-ago" title="Thursday, August 22, 2019 5:02 PM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>You did not do double check :)<br>See lines 344-347, wrong variables and DMA configuration<br>I also don't see your interrupts implemented for DMA. Functions are there but no content.<br>Also function usart_process_data2, you call USART6 and USART2.</p><p>Please go through the code again and check part by part. Make sure all DMA config matches your internal memory, etc.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-3" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">3</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4587760942" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23vfmzy" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4587760942"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4588867946"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4588867946"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/mikrosay/" data-action="profile" data-tab="" data-username="mikrosay" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>M</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/mikrosay/" data-action="profile" data-tab="" data-username="mikrosay" target="_blank" rel="noopener noreferrer">mikrosay</a></span> <a data-action="follow" data-user="336728448" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4587760942" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4588867946" data-role="relative-time" class="time-ago" title="Friday, August 23, 2019 3:01 PM">5 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I am not sure I understand. The part you are referring to is generated by the STM IDE and since there is no "user code" area any change would be reverted back at each new code generation. USART/DMA initialization is actually done by STM IDE and there shouldn't be any human error. Still I have re-checked the various data paths and compared them to data sheet. They seem correct. I  don't particularly need half/full complete interrupts hence I simply ignored them. Am I missing something?</p><p>I have also finally solved how to receive data, albeit in IT/LL. The victory seems mute as the initial goal was to record the data in DMA mode.</p><p>Shouldn't     LL_DMA_SetMemoryAddress() actually do this? After all it is preset in circular mode. I thought the new part of the code was the idle detection.</p><p>As I am new to the platform simple things might look hard to beginners like me.Do you plan  on adopting your code to STM IDE, both to promote the software and to help beginners like me?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-4" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">4</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4588867946" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23w3d62" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4588867946"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4588916509"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4588916509"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4588867946" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> mikrosay</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4588916509" data-role="relative-time" class="time-ago" title="Friday, August 23, 2019 3:46 PM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I was referring to your pastebin link. See lines there.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4588916509" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23w4en1" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4588916509"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4588916509-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4588867946-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4587760942-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4587672871-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4587549160-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4587526077-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4583457969"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4583457969"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar"><div class="user user--refresh"><div>I</div></div></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span class="author">Indra</span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583457969" data-role="relative-time" class="time-ago" title="Monday, August 19, 2019 6:59 AM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hello, i would like to ask<br>I've tried idle_line_irq_L4 example project. it works but if the dma data length reach the size of dma buffer, it stop transmitting the data to usart<br>how to solve this problem?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4583457969" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23svesx" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4583457969"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4583466415"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4583466415"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583457969" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Indra</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583466415" data-role="relative-time" class="time-ago" title="Monday, August 19, 2019 7:17 AM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>This cannot be the case. Which STM32L4 did you use? Did you modify some part of code?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4583466415" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23svlbj" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4583466415"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4583510909"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4583510909"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar"><div class="user user--refresh"><div>I</div></div></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span class="author">Indra</span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583466415" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583510909" data-role="relative-time" class="time-ago" title="Monday, August 19, 2019 8:58 AM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I use STM32L452CEU .. I modified only DMA channel and USART channel and implemented your code into my project.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-2" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">2</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4583510909" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23swjnh" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4583510909"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4583513054"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4583513054"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583510909" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Indra</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583513054" data-role="relative-time" class="time-ago" title="Monday, August 19, 2019 9:02 AM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Did you also modify interrupt handlers for new DMA channel? Make sure you are also clearing right DMA TC/HT flags in interrupts for DMA.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4583513054" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23swlb2" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4583513054"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4583520472"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4583520472"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar"><div class="user user--refresh"><div>I</div></div></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span class="author">Indra</span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583513054" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4583520472" data-role="relative-time" class="time-ago" title="Monday, August 19, 2019 9:18 AM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Sorry I forget to set the DMA in circular mode lol..<br>Now it's working fine.<br>Thank you for the code and your fast response..<br>cheers..</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4583520472" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23swr14" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4583520472"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4583520472-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4583513054-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4583510909-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4583466415-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4583457969-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4555288277"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4555288277"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar"><div class="user user--refresh"><div>V</div></div></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span class="author">Veritas</span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4555288277" data-role="relative-time" class="time-ago" title="Saturday, July 27, 2019 7:59 AM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>It is actually possible to go the HC/TC/Idle route without the cons that you listed. When interrupts occur we notify a listener and unsubscribe them. On notification the listener copies the data and pushes a processing callback to a task queue. This is very cheap and is the only thing that occurs inside the interrupt. The task queue is then polled and executed in the main loop, once the callback is processed the listener re-subscribes to the interrupts.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4555288277" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23c3mxh" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4555288277"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4555301671"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4555301671"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4555288277" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Veritas</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4555301671" data-role="relative-time" class="time-ago" title="Saturday, July 27, 2019 8:31 AM">5 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>That's exactly what I'm doing in RTOS example code. The only thing I do not understand is this "listener". Why do you need any listener? This is interrupt routine already..</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-2" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">2</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4555301671" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23c3x9j" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4555301671"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4555301671-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4555288277-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-3639155439"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3639155439"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/dawidkopy/" data-action="profile" data-tab="" data-username="dawidkopy" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>D</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/dawidkopy/" data-action="profile" data-tab="" data-username="dawidkopy" target="_blank" rel="noopener noreferrer">Dawid Kopyś</a></span> <a data-action="follow" data-user="272549690" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3639155439" data-role="relative-time" class="time-ago" title="Thursday, November 30, 2017 4:11 AM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hi,<br>I just want to let you know that you should consider adding "volatile" keyword to size_t Write, Read; declaration since you are using those variables in interrupt routines.<br>The code you wrote wasn't working for me till I changed the declaration by adding mentioned "volatile".<br>Anyways, great job man, I would like to be as good embedded programmer as you are someday.<br>Cheers.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3639155439" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1o6nqb3" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3639155439"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-3639315918"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3639315918"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3639155439" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Dawid Kopyś</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3639315918" data-role="relative-time" class="time-ago" title="Thursday, November 30, 2017 7:18 AM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Absolutelly I agree here. It was just to show the concept.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3639315918" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1o6r64u" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3639315918"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3639315918-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3639155439-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-3522726411"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3522726411"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar"><div class="user user--refresh"><div>M</div></div></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span class="author">me</span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3522726411" data-role="relative-time" class="time-ago" title="Monday, September 18, 2017 11:40 AM">7 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>doesn't work with STM321x as the TC flag isn't set when you disable the DMA. Secondly there seems to be an idle int after every TX as well, so that needs trapping out to ensure it doesn't force the rxdma to be aborted.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-1" data-action="upvote" title="" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">1</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3522726411" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1m9c93f" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3522726411"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-3661287622"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3661287622"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/matthiaslipinsky/" data-action="profile" data-tab="" data-username="matthiaslipinsky" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="218841627" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/matthiaslipinsky/" data-action="profile" data-tab="" data-username="matthiaslipinsky" target="_blank" rel="noopener noreferrer">Matthias Lipinsky</a></span> <a data-action="follow" data-user="218841627" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3522726411" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> me</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3661287622" data-role="relative-time" class="time-ago" title="Thursday, December 14, 2017 1:31 AM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Seems that I am facing the same problem with not raising the TC interrupt after disabling the DMA at a STM32F107VCT6. Is there any solution known?</p><p>TIA</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3661287622" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1oju3ly" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3661287622"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-3661666595"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3661666595"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3661287622" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Matthias Lipinsky</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3661666595" data-role="relative-time" class="time-ago" title="Thursday, December 14, 2017 7:15 AM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p><a href="https://disq.us/url?url=https%3A%2F%2Fcommunity.st.com%2Fthread%2F42689-efficiently-use-dma-with-uart-rx-on-stm32%3AwIZVXVZi5_y5iSAuRcDwD4NZu1Y&amp;cuid=3099287" rel="nofollow noopener" title="https://community.st.com/thread/42689-efficiently-use-dma-with-uart-rx-on-stm32">https://community.st.com/th...</a></p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3661666595" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1ok280z" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3661666595"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4092745383"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4092745383"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_6UFdrnI1Hi/" data-action="profile" data-tab="" data-username="disqus_6UFdrnI1Hi" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>S</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_6UFdrnI1Hi/" data-action="profile" data-tab="" data-username="disqus_6UFdrnI1Hi" target="_blank" rel="noopener noreferrer">Sandor Marton</a></span> <a data-action="follow" data-user="298175678" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3661666595" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4092745383" data-role="relative-time" class="time-ago" title="Thursday, September 13, 2018 8:42 AM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>The linked page is no longer working. ST has broke the link, can you update the link please?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4092745383" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1vopqjr" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4092745383"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4092745383-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-3662142807"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3662142807"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/matthiaslipinsky/" data-action="profile" data-tab="" data-username="matthiaslipinsky" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="218841627" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/matthiaslipinsky/" data-action="profile" data-tab="" data-username="matthiaslipinsky" target="_blank" rel="noopener noreferrer">Matthias Lipinsky</a></span> <a data-action="follow" data-user="218841627" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3661666595" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3662142807" data-role="relative-time" class="time-ago" title="Thursday, December 14, 2017 5:01 PM">6 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thx.<br>The only new information I found at your link was this:<br>"I don't use the 'F1xx.  I looked into RM0008 and - contrary to 'F4xx - there is no mention that the Transfer Complete interrupt should be thrown upon channel disable, so it appears it works as expected and you have to cope with this in your Software"<br>So, in the Manual of the used STM32F107VCT6 I could neither find this mention, that this Interrupt is thrown upon disabling. So, that means, that not every STM32 cpu supports that?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3662142807" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1okcfh3" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3662142807"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-3662154898"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="3662154898"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3662142807" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Matthias Lipinsky</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3662154898" data-role="relative-time" class="time-ago" title="Thursday, December 14, 2017 5:08 PM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Actually, I suggest you fully read the comments. The 3rd example is the best one where you disable option for possible race conditions and lost bytes.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-3662154898" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1okcosy" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:3662154898"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4014638760"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4014638760"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar"><div class="user user--refresh"><div>A</div></div></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span class="author">Attila</span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-3662154898" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4014638760" data-role="relative-time" class="time-ago" title="Tuesday, July 31, 2018 1:14 PM">6 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hi! Your STM Community link is currently down. Could you please share that 3rd example here for STM32F1xx devices? Thank you!</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4014638760" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1ue7n3c" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4014638760"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4014638760-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3662154898-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3662142807-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3661666595-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3661287622-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-3522726411-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5699984871"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5699984871"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/kilenchetvenotkentaur/" data-action="profile" data-tab="" data-username="kilenchetvenotkentaur" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>K</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/kilenchetvenotkentaur/" data-action="profile" data-tab="" data-username="kilenchetvenotkentaur" target="_blank" rel="noopener noreferrer">Kilenchetvenot Kentaur</a></span> <a data-action="follow" data-user="380723064" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5699984871" data-role="relative-time" class="time-ago" title="Thursday, January 20, 2022 2:57 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hi Tilen! Thank you for the post, very very useful! I'd like to ask about any ways to check if the DMA circular receive is still alive? My application is waiting for data packets to arrive on the UART channel, using DMA with circular buffer. There is also an interrupt handler for UART errors, to try to detect if enything went wrong on the line and then clear the errors and restart the DMA RX with HAL_UART_Receive_DMA(). However still we see that the UART stops receiving data and we need a restart. I assume there should be a way to detect if the DMA RX stopped on a reason and we could recover. Please advise.</p><p>Many thanks!</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5699984871" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2m9mgh3" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5699984871"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5700024962"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5700024962"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5699984871" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Kilenchetvenot Kentaur</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5700024962" data-role="relative-time" class="time-ago" title="Thursday, January 20, 2022 3:31 PM">2 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>You can check enable bit in DMA control register and check for any errors in DMA status registers. Then you know if it is working or not (DMA itself). For sure you need to handle UART too, to actually receive character first.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5700024962" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2m9nbeq" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5700024962"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5700749971"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5700749971"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/kilenchetvenotkentaur/" data-action="profile" data-tab="" data-username="kilenchetvenotkentaur" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>K</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/kilenchetvenotkentaur/" data-action="profile" data-tab="" data-username="kilenchetvenotkentaur" target="_blank" rel="noopener noreferrer">Kilenchetvenot Kentaur</a></span> <a data-action="follow" data-user="380723064" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5700024962" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5700749971" data-role="relative-time" class="time-ago" title="Thursday, January 20, 2022 11:58 PM">2 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Thank you, I'll implement these verifications. If there is an error should I simply restart the DMA receive process?</p><p>I also checked and looks like DMA channel is still enabled, however the HAL DMA instance is in STATE_BUSY. It may have become stuck on some reason?</p><p>Registers (all in binary):<br>CCR: 10101111<br>CNDTR: 11<br>CPAR: 1000000000000000100110000100100<br>CMAR: 100000000000000001001011101000<br>ISR: 0 all, no transfer error detected.</p><p>Device is an STM32F439 Nucleo 144.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5700749971" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2ma2utv" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5700749971"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5700749971-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5700024962-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5699984871-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5362081213"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5362081213"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/lhamikvrak/" data-action="profile" data-tab="" data-username="lhamikvrak" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="117884570" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/lhamikvrak/" data-action="profile" data-tab="" data-username="lhamikvrak" target="_blank" rel="noopener noreferrer">İlhami Kıvrak</a></span> <a data-action="follow" data-user="117884570" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5362081213" data-role="relative-time" class="time-ago" title="Tuesday, April 27, 2021 9:09 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>We can use osSignals in CMSIS-RTOS mode instead of empty osmessagequeues</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5362081213" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2gog0cd" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5362081213"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-5362216028"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5362216028"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5362081213" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> İlhami Kıvrak</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5362216028" data-role="relative-time" class="time-ago" title="Tuesday, April 27, 2021 11:04 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>For cmsis-os yes. But not for the other oses. Plus then you need to wait for different signals to handle all cases.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5362216028" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2goiwd8" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5362216028"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5362216028-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5362081213-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-5232063117"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="5232063117"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/disqus_3sDeB1tidp/" data-action="profile" data-tab="" data-username="disqus_3sDeB1tidp" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>M</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/disqus_3sDeB1tidp/" data-action="profile" data-tab="" data-username="disqus_3sDeB1tidp" target="_blank" rel="noopener noreferrer">Miguel Aguilar</a></span> <a data-action="follow" data-user="363108799" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-5232063117" data-role="relative-time" class="time-ago" title="Monday, January 18, 2021 6:11 PM">3 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hello Mr. Tilen!!<br>Is it possible to use your code with the stm32f303k8?</p><p>Thank youy</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-5232063117" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2ej19ql" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:5232063117"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-5232063117-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4903256159"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4903256159"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="198099252" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer">Rob Meades</a></span> <a data-action="follow" data-user="198099252" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4903256159" data-role="relative-time" class="time-ago" title="Wednesday, May 6, 2020 3:08 PM">4 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container" style="height: 374px;"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I'm extremely close to getting my version of this code working except that DMA just doesn't appear to be acting for me.</p><p>I can see Tx data leaving USART1 of my STM32F4 at 115,200 bits/s, I can see Rx data coming back from the device at the other end at the same data rate and, if I enable the USART1 <code>RXNE</code> interrupt flag and put a break-point in the USART1 interrupt I can see that USART1's <code>DR</code> contains those received characters, so the USART is fine.  I have, as far as I can tell, made all the same DMA configuration calls that you have here for USART1 using DMA2, stream 2, channel 4 (from table 43 of RM0090).</p><p>However, when I call <code>LL_DMA_GetDataLength()</code> for DMA2/stream 2 in <code>USART1_IRQHandler</code> with only the USART IDLE interrupt flag enabled, or do the same in the <code>DMA2_Stream2_IRQHandler</code> with the DMA <code>HT</code> and <code>TC</code> interrupt flags enabled, and break-point there to examine the return value (or put an assert in there that the return value is equal to my buffer length), the function always returns my buffer length (1024), never any thing else; the assert never fails, nothing has been transferred by the DMA.  The <code>DMA2_Stream2</code> registers seem to have sensible contents and DMA2's <code>LISR</code> and <code>HISR</code> registers are always zero.</p><p><code>DMA2_Stream2	DMA_Stream_TypeDef *	0x40026440<br>    CR    volatile uint32_t    0x51d<br>    NDTR  volatile uint32_t	1024<br>    PAR   volatile uint32_t	0x40011004<br>    M0AR  volatile uint32_t	0x200064c0<br>    M1AR  volatile uint32_t	0<br>    FCR  volatile uint32_t	0x21<br>DMA2        DMA_TypeDef *	0x40026400<br>    LISR  volatile uint32_t	0x0<br>    HISR  volatile uint32_t	0x0<br>    LIFCR  volatile uint32_t	0x0<br>    HIFCR  volatile uint32_t	0x0<br></code></p><p>In fact, if I display the contents of the USART1 registers at the same time, <code>SR</code> shows that the <code>RXNE</code> flag has been set and the <code>DR</code> register shows the last character I know USART1 received (<code>\n</code>).</p><p><code>USART1	USART_TypeDef *	0x40011000<br>	SR	volatile uint32_t	0x3f0<br>	DR	volatile uint32_t	0xa<br>	BRR	volatile uint32_t	364<br>	CR1	volatile uint32_t	0x201c<br>	CR2	volatile uint32_t	0x0<br>	CR3	volatile uint32_t	0x340<br>	GTPR	volatile uint32_t	0x0<br></code></p><p>Aside from checking, double-checking and triple-checking that I am making all the same calls as you with all the correct parameters to configure my DMA for DMA2/stream 2/channel 4, are there any other debug steps I might take to find the cause of my problem?</p><p>The code can be found <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fu-blox%2Fcellular%2Fblob%2Fstm32f4_port%2Fport%2Fplatform%2Fstm%2Fstm32f4%2Fsrc%2Fcellular_port_uart.c%23L692%3ATrgFRlImitmrIAgNrulnIU8YoLM&amp;cuid=3099287" rel="nofollow noopener" title="https://github.com/u-blox/cellular/blob/stm32f4_port/port/platform/stm/stm32f4/src/cellular_port_uart.c#L692">here</a> with the important header file <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fu-blox%2Fcellular%2Fblob%2Fstm32f4_port%2Fport%2Fplatform%2Fstm%2Fstm32f4%2Fcfg%2Fcellular_cfg_hw_platform_specific.h%3Ad8B1Jnhv8466OHI6cF59CEblChI&amp;cuid=3099287" rel="nofollow noopener" title="https://github.com/u-blox/cellular/blob/stm32f4_port/port/platform/stm/stm32f4/cfg/cellular_cfg_hw_platform_specific.h">here</a>; it is heavily parameterised but I've also hard coded the values and checked and checked...  I'll check again.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4903256159" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/2939snz" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4903256159"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4903864175"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4903864175"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4903256159" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Rob Meades</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4903864175" data-role="relative-time" class="time-ago" title="Wednesday, May 6, 2020 11:07 PM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>When you call EnableStream, does it actually enable it?<br>Or better to ask, are HT and TC events triggered even? From your message it seems they are, but please confirm this.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4903864175" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/293mttb" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4903864175"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4903931192"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4903931192"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="198099252" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer">Rob Meades</a></span> <a data-action="follow" data-user="198099252" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4903864175" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4903931192" data-role="relative-time" class="time-ago" title="Thursday, May 7, 2020 12:07 AM">4 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p><a href="http://disq.us/url?url=%23%3ANO3CDrWS14R4hWRRS0InrMYHb9Y&amp;cuid=3099287" rel="nofollow noopener" title="#"></a>Thanks for the very swift response.</p><p>If the stream configuration register offset from DMAx is "0x10 + 0x18 × stream number" then for DMA2 stream 2 I make that DMA2 (0x40026400) + 0x10 + 0x18 * 2 = 0x40026440. The contents of that register before my initialisation function starts was 0 and, after having done all the configuration, just before I enable DMA with a call to <code>LL_DMA_EnableStream()</code>, the contents are 0x051c and then after calling <code>LL_DMA_EnableStream()</code> they become 0x051d, so bit 0 <code>EN</code> is set by that call.</p><p>Concerning events <code>HT</code> and <code>TC</code>, on my board USART1 is wired to a physical thing, a cellular AT modem, which in the current state of play will only responding with "\r\nOK\r\n" to my "AT\r" so I won't get up to enough DMA length for the DMA <code>HT</code> or <code>TC</code> flags to be hit on a 1024 byte buffer: for now what I'm looking for is the call to <code>LL_DMA_GetDataLength()</code> in the USART1 interrupt IDLE event, which definitely does trigger, to tell me that a non-zero number of bytes (6 bytes: "\r\nOK\r\n") have been DMA'ed by the time the USART1 Rx line goes idle.</p><p>Just to confirm, I've also looked at the buffer where things are meant to be being DMA'ed to and it shows no sign of the stuff that is coming in, so the DMA has really not done any DMA'ing.</p><p>I must have got a step wrong.  Question is, which one?</p><p>Or is this a timing thing: when does <code>NDTR</code> get updated?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4903931192" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/293o9iw" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4903931192"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4904310052"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4904310052"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4903931192" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Rob Meades</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4904310052" data-role="relative-time" class="time-ago" title="Thursday, May 7, 2020 7:49 AM">4 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>I am 99.9% sure I found the issue. Channel selection of DMA stream is in the upper 16-bits area and in your case it is zero, since your value is 0x051D, while is should be something like 0x0XXXyyyy.</p><p>I also see the reason for this. Your header configuration uses 0-7 numbers for channel (#define CELLULAR_CFG_UART1_DMA_CHANNEL             4), while LL function that sets DMA channel expects value that is LL_DMA_CHANNEL_4. This macro is defined in stm32f4xx_ll_dma.h and is not set to 4, but rather to actual bit position.</p><p>I would advise you to modify your header and rely only on LL things:</p><p>#define CELLULAR_CFG_UART1_DMA_ENGINE              DMA2<br>#define CELLULAR_CFG_UART1_DMA_STREAM             LL_DMA_STREAM_2<br>#define CELLULAR_CFG_UART1_DMA_CHANNEL             LL_DMA_CHANNEL_4</p><p>Of course you have to modify source code accordingly as now DMA2 is actual memory address and not anymore value 1 or 2 as it was before. Or you can start with channel only and you will see how it goes.</p><p>A tip: Always read what are allowed input parameters for specific LL function :)<br>Let me know if it works.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4904310052" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/293wdus" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4904310052"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4904373985"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4904373985"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="198099252" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer">Rob Meades</a></span> <a data-action="follow" data-user="198099252" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4904310052" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4904373985" data-role="relative-time" class="time-ago" title="Thursday, May 7, 2020 9:53 AM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>You did it again!!  My hero :-).  Yes, that was absolutely the problem, I'd not dug deep enough to find that "bit-map not number" instruction.  I generally avoid dragging platform headers up into my more generic headers wherever I can; instead I have just added another const look-up table of channel number to <code>LL_DMA_CHANNEL_x</code> and now my transmission of "AT" receives "OK" back!  Lots of other bugs to find now but I'm over the DMA hump.  They need to get you solving the problem of world hunger, you're wasted here :-).</p><p>Many thanks again.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4904373985" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/293xr6p" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4904373985"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4904373985-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4904310052-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4903931192-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4903864175-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4903256159-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4892962471"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4892962471"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="198099252" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer">Rob Meades</a></span> <a data-action="follow" data-user="198099252" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4892962471" data-role="relative-time" class="time-ago" title="Tuesday, April 28, 2020 1:28 PM">4 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>First I'd like to congratulate you on a most excellent article; I'm currently porting code to multiple chipsets (ESP32, NRF52840 and now STM32F4) and this is without doubt the clearest and most SW engineer friendly article, and probably whole site, that I've seen so far.  Why don't ST themselves have something like this?  Maybe they don't need it...</p><p>Anyway, to the question: my UART driver needs to initalise, deinitialise and then reinitialise cleanly.  However, my version of your code above throws an unexpected interrupt when I call <code>NVIC_EnableIRQ()</code> (line #381 of the <a href="https://disq.us/url?url=https%3A%2F%2Fpastebin.com%2FixGKgwuT%3ANgpjnU4NnIulREUa0nhE0K--_j4&amp;cuid=3099287" rel="nofollow noopener" title="https://pastebin.com/ixGKgwuT">pastebin</a>) coming back around in init() again so clearly I'm not deinitialising properly.</p><p>The complete code can be found <a href="https://disq.us/url?url=https%3A%2F%2Fpastebin.com%2FixGKgwuT%3ANgpjnU4NnIulREUa0nhE0K--_j4&amp;cuid=3099287" rel="nofollow noopener" title="https://pastebin.com/ixGKgwuT">in the pastebin</a> but basically in the deinit() function (line #448 of the <a href="https://disq.us/url?url=https%3A%2F%2Fpastebin.com%2FixGKgwuT%3ANgpjnU4NnIulREUa0nhE0K--_j4&amp;cuid=3099287" rel="nofollow noopener" title="https://pastebin.com/ixGKgwuT">pastebin</a>) I'm:</p><p>- disabling the DMA interrupt,<br>- disabling the USART interrupt,<br>- disabling the DMA stream,<br>- disabling the USART,<br>- deinitialising the USART.</p><p>And I also clear pending interrupts before I enable them in the init() function, just in case.  Can you see anything obvious that I'm doing wrong?  To be clear, no interrupts should have been triggered, nothing is happening, this is only init()/deinit() in a cycle.   Oh and this is an STM32F437VG and I'm using USART 1, DMA 1, DMA stream 0, DMA channel 0, pins PA_9, PA_10, PA_11 and PA_12.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4892962471" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/28x5607" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4892962471"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4892991122"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4892991122"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4892962471" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Rob Meades</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4892991122" data-role="relative-time" class="time-ago" title="Tuesday, April 28, 2020 2:03 PM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hi Rob, the easiest way to reset peripheral 100% is by setting its registers to default state. In the code I can see that you are clearing the NVIC pending bit, but not DMA pending interrupt bit. You have to clear all DMA flags before starting the transfer (or enabling it).</p><p>You can completely reset peripheral by writing 1 to relevang RCC reset enable registers and then clearing it afterwards, but since single DMA instance may be used for multiple peripherals, this may not be the best idea, since it will reset all transfers. So as a conclusion, I see that you are missing clear of DMA status and interrupt registers for this particular stream.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4892991122" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/28x5s42" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4892991122"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4893087288"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4893087288"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="198099252" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/rob_meades/" data-action="profile" data-tab="" data-username="rob_meades" target="_blank" rel="noopener noreferrer">Rob Meades</a></span> <a data-action="follow" data-user="198099252" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4892991122" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> Majerle Tilen</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4893087288" data-role="relative-time" class="time-ago" title="Tuesday, April 28, 2020 3:37 PM">4 years ago</a> <span> <span class="has-edit" data-role="has-edit">edited</span></span></span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Many thanks for the swift response.  I've added calls to ALL of the <code>LL_DMA_ClearFlag_xxx()</code> functions for my DMA stream, even for the ones I hadn't enabled, and that has done the trick.  Perfection!  My thanks again, you are doing an excellent job here.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4893087288" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/28x7ubc" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4893087288"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4893087288-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4892991122-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4892962471-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4707185100"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4707185100"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar"><div class="user user--refresh"><div>NU</div></div></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span class="author">Nitin U</span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4707185100" data-role="relative-time" class="time-ago" title="Saturday, November 30, 2019 10:48 AM">4 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hi,<br>I am using USART1 with IRQ interrupt every thing is working as expected but when i receive a large file(2KB) i am not able to store the data .<br>I am trying to store the the received file to SD card using SDIO ,Is there any way to receive  data without any data loss ,if yes kindly provide the details to implement the same .(STM32F446RE)</p><p>&lt;static void="" usart1_config(void)="" {="" usart_inittypedef="" usart_initstructure;="" nvic_inittypedef="" nvic_initstructure;="" gpio_inittypedef="" gpio_initstructure;="" *="" enable="" gpio="" clock="" *="" rcc_ahb1periphclockcmd(usart1_tx_gpio_clk="" |="" usart1_rx_gpio_clk,="" enable);="" *="" enable="" usart="" clock="" *="" usart1_clk_init(usart1_clk,="" enable);="" *="" connect="" usart="" pins="" to="" af7="" *="" gpio_pinafconfig(usart1_tx_gpio_port,="" usart1_tx_source,="" usart1_tx_af);="" gpio_pinafconfig(usart1_rx_gpio_port,="" usart1_rx_source,="" usart1_rx_af);="" *="" configure="" usart="" tx="" and="" rx="" as="" alternate="" function="" push-pull="" *="" gpio_initstructure.gpio_mode="GPIO_Mode_AF;" gpio_initstructure.gpio_speed="GPIO_Speed_100MHz;" gpio_initstructure.gpio_otype="GPIO_OType_PP;" gpio_initstructure.gpio_pupd="GPIO_PuPd_UP;" gpio_initstructure.gpio_pin="USART1_TX_PIN;" gpio_init(usart1_tx_gpio_port,="" &amp;gpio_initstructure);="" gpio_initstructure.gpio_pin="USART1_RX_PIN;" gpio_init(usart1_rx_gpio_port,="" &amp;gpio_initstructure);="" *="" enable="" the="" usart="" oversampling="" by="" 8="" *="" usart_oversampling8cmd(usart1,="" enable);="" usart_initstructure.usart_baudrate="115200;" usart_initstructure.usart_wordlength="USART_WordLength_8b;" usart_initstructure.usart_stopbits="USART_StopBits_1;" usart_initstructure.usart_parity="USART_Parity_No;" usart_initstructure.usart_hardwareflowcontrol="USART_HardwareFlowControl_None;" usart_initstructure.usart_mode="USART_Mode_Rx" |="" usart_mode_tx;="" usart_init(usart1,="" &amp;usart_initstructure);="" nvic_prioritygroupconfig(nvic_prioritygroup_2);="" *="" enable="" the="" usartx="" interrupt="" *="" nvic_initstructure.nvic_irqchannel="USART1_IRQn;" nvic_initstructure.nvic_irqchannelpreemptionpriority="0;" nvic_initstructure.nvic_irqchannelsubpriority="0;" nvic_initstructure.nvic_irqchannelcmd="ENABLE;" nvic_init(&amp;nvic_initstructure);="" usart_itconfig(usart3,="" usart_it_txe,="" enable);="" usart_itconfig(usart1,="" usart_it_rxne,="" enable);="" *="" enable="" usart="" *="" usart_cmd(usart1,="" enable);=""&gt;&lt;/void&gt;</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4707185100" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/25ujb9o" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4707185100"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4707185100-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4586467424"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4586467424"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/balajek/" data-action="profile" data-tab="" data-username="balajek" target="_blank" rel="noopener noreferrer" class="user user--refresh"><div>B</div></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/balajek/" data-action="profile" data-tab="" data-username="balajek" target="_blank" rel="noopener noreferrer">BALA</a></span> <a data-action="follow" data-user="336687785" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4586467424" data-role="relative-time" class="time-ago" title="Wednesday, August 21, 2019 4:50 PM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Hi .. I am receiving continuous data from sensor to STM32F7 microcontroller. I am trying to read it through Circular DMA using HAL_UART_Receive_DMA() function.The received data is not synchronized and is randomly received. I need to make sure no data is getting lost and the receved data is synchronized.Is there any way to do it. I am sorry i am new to this.?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4586467424" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/23unwww" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4586467424"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4586467424-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li><li class="post" id="post-4267055274"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4267055274"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar"><div class="user user--refresh"><div>S</div></div></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span class="author">stmnewbie</span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4267055274" data-role="relative-time" class="time-ago" title="Thursday, January 3, 2019 5:31 AM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>Is this possible on F072RB ? I guess it has DMA TX/RX Call back for HT and TC  but no IDLE IT?<br>also is there alternative functions for "LL_DAM_GetDataLength" ?</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4267055274" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1ykhsx6" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4267055274"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"><li class="post" id="post-4267275009"><div role="alert"></div><div data-role="post-content" class="post-content" tabindex="0"><div class="indicator"></div><span class="pinned-icon"></span><ul class="post-menu dropdown post-menu--refresh" data-role="menu" data-view-id="post-menu" data-post-id="4267275009"><li class="post-menu-item collapse"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Collapse" name="Collapse"><span>−</span></a></li><li class="post-menu-item expand"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="collapse" title="Expand" name="Collapse"><span>+</span></a></li><li class=" post-menu-item" role="menuitem"><a class="dropdown-toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="flag" data-role="flag" title="Flag as inappropriate"><i aria-hidden="true" class="icon icon-flag"></i></a></li></ul><div class="avatar hovercard"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer" class="user user--refresh"><img data-role="user-avatar" data-user="113374668" src="./noavatar92.png" alt="Avatar" class="image-refresh"></a></div><div class="post-body"><header class="comment__header"><span class="post-byline"><span> <span class="author publisher-anchor-color"><a href="https://disqus.com/by/majerletilen/" data-action="profile" data-tab="" data-username="majerletilen" target="_blank" rel="noopener noreferrer">Majerle Tilen</a></span> <span class="badge moderator"><span class="badge-content">Admin</span></span><a data-action="follow" data-user="113374668" class="follow-user-container" tabindex="0"><span class="follow-user" aria-label="Follow" title="Follow"></span></a></span><span class="parent-link-container"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4267055274" class="parent-link" data-role="parent-link"><i aria-label="in reply to" class="icon-forward" title="in reply to"></i> stmnewbie</a></span></span>  <span class="post-meta" style="display: block;"> <a href="https://stm32f4-discovery.net/2017/07/stm32-tutorial-efficiently-receive-uart-data-using-dma/#comment-4267275009" data-role="relative-time" class="time-ago" title="Thursday, January 3, 2019 10:49 AM">5 years ago</a> </span> </header><div class="post-body-inner"><div class="post-message-container" data-role="message-container"><div class="publisher-anchor-color" data-role="message-content"><div class="post-message " data-role="message" dir="auto"><div><p>LL_DAM_GetDataLength is not valid function. It is LL_DMA_GetDataLength and it exists in F0 LL drivers.<br>If there is no IDLE IT, you may consider using Receiver timeout feature. If this is also not available, you may need to implement timer interrupt and check new data in the interrupt.</p></div></div><span class="post-media"><ul data-role="post-media-list"></ul></span></div></div><a class="see-more hidden" title="see more" data-action="see-more">see more</a></div><footer class="comment__footer"><menu class="comment-footer__menu"><li class="voting" data-role="voting"><div class="post-votes"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-up  count-0" data-action="upvote" title="Vote up" name="Vote up"><span class="control"></span> <span class="updatable count" data-role="likes">0</span></a><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="vote-down  count-0" data-action="downvote" title="Vote down" name="Vote down"><span class="control"></span> <span class="updatable count" data-role="dislikes">0</span></a></div></li><li class="reply" data-role="reply-link"><a class="comment-footer__action" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="reply"><span class="text">Reply</span></a></li><li id="comment__share-4267275009" class="comment__share"><a class="toggle" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="expand-share"><i class="icon icon-share"></i><span class="text">Share ›</span></a><ul class="comment-share__buttons"><div class="comment-share__social-share-buttons"><li class="twitter share__button-container"><button class="share__button icon icon-twitter-x" data-action="share:twitter" aria-label="Share comment on X (Twitter)"></button></li><li class="facebook share__button-container"><button class="share__button icon icon-facebook" data-action="share:facebook" aria-label="Share comment on Facebook"></button></li></div><li class="link share__button-container"><button class="share__button icon icon-link" value="http://disq.us/p/1ykmigx" name="Link" title="Click to copy post link" data-action="copy-link" aria-label="Copy link to comment"></button><input class="share__button link_url" name="Link" title="Click to copy post link" data-action="copy-link" readonly=""></li></ul></li><li class="realtime" data-role="realtime-notification:4267275009"><span class="realtime-replies realtime-replies--refresh icon icon-pencil" style="display: none;"></span><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" class="realtime-button realtime-button--refresh" style="display: none;"></a></li></menu></footer></div><div class="moderate-form blacklist-form" data-role="blacklist-form"></div><div class="moderate-form flag-form" data-role="flagging-form"></div><div class="badges-form" data-role="badges-form"></div><div class="reply-form-container" data-role="reply-form"></div></div><div class="children"><ul data-role="children"></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4267275009-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="show-children-wrapper hidden"><a class="show-children" id="post-4267055274-show-children" data-action="show-children" href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#">Show more replies</a></div></div></li></ul><div class="load-more-refresh load-more-refresh--v2" data-role="more" style=""><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" data-action="more-posts" class="btn load-more-refresh__button ">Load more comments</a></div></div></section><div id="placement-bottom" data-tracking-area="discovery-south"></div><footer id="footer" data-tracking-area="footer" class="disqus-footer__wrapper disqus-footer__wrapper--refresh"><div><div class="disqus-footer disqus-footer--refresh"><ul class="disqus-footer__list"><li id="thread-subscribe-button" class="email disqus-footer__item disqus-footer__item--refresh"><div class="default"><a href="https://disqus.com/embed/comments/?base=default&amp;f=stm32f4discoverycom&amp;t_i=3015%20https%3A%2F%2Fstm32f4-discovery.net%2F%3Fp%3D3015&amp;t_u=https%3A%2F%2Fstm32f4-discovery.net%2F2017%2F07%2Fstm32-tutorial-efficiently-receive-uart-data-using-dma%2F&amp;t_e=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_d=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;t_t=STM32%20tutorial%3A%20Efficiently%20receive%20UART%20data%20using%20DMA&amp;s_o=default#" rel="nofollow" data-action="subscribe" title="Subscribe and get email updates from this discussion" class="disqus-footer__link disqus-footer__link--refresh"><div class="icon-wrapper"><i aria-hidden="true" class="icon-subscribe-refresh"></i></div><i aria-hidden="true" class="icon icon-checkmark"></i><span id="thread-subscribe-text-default" class="text-item">Subscribe</span><span id="thread-subscribe-text-subscribed" class="text-item hidden">Subscribed</span></a></div></li><li class="privacy disqus-footer__item disqus-footer__item--refresh"><a href="https://disqus.com/privacy-policy" rel="nofollow noopener noreferrer" target="_blank" class="disqus-footer__link disqus-footer__link--refresh" title="Privacy"><div class="icon-wrapper"><i aria-hidden="true" class="icon-privacy-refresh"></i></div><span class="text-item">Privacy</span></a></li><li class="do-not-sell disqus-footer__item disqus-footer__item--refresh"><a href="https://disqus.com/data-sharing-settings/" rel="nofollow noopener noreferrer" target="_blank" class="disqus-footer__link disqus-footer__link--refresh"><div class="icon-wrapper"><i aria-hidden="true" class="icon-warning-refresh"></i></div><span class="text-item">Do Not Sell My Data</span></a></li></ul><span class="disqus-footer__logo"><a href="https://disqus.com/" rel="nofollow" title="Powered by Disqus" class="disqus-footer__link disqus-footer__link--refresh">Powered by Disqus</a></span></div></div></footer></div></div></div><div id="embed_v2-root"></div></div><iframe id="ssIFrame_google" sandbox="allow-scripts allow-same-origin allow-storage-access-by-user-activation" allow="identity-credentials-get" aria-hidden="true" frame-border="0" style="position: absolute; width: 1px; height: 1px; inset: -9999px; display: none;" src="./iframe.html"></iframe><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; width: 0px; height: 0px;"><div></div></div></div><iframe src="./pixel.html" style="display: none;"></iframe><img src="./saved_resource(1)" style="display: none;"><iframe src="./sync.html" style="display: none;"></iframe></body></html>